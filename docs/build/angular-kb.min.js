(function(){angular.module("kb.config",[]).value("kb.config",{}).value("kb.components",{}),angular.module("kb.templates",[]),angular.module("kb",["kb.config","kb.ui.inlineEdit","kb.ui.clickToggle","kb.ui.copyButton","kb.ui.nl2br","kb.ui.sapiEventsTable","kb.ui.loader","kb.ui.autoComplete","kb.ui.focus","kb.ui.tree","kb.ui.runButton","kb.ui.runIcon","kb.ui.codemirror","kb.ui.datetime","kb.ui.duration","kb.ui.sapiConsoleHref","kb.ui.sapiComponentIcon","kb.ui.confirm","kb.ui.check","kb.ui.searchFilter","kb.ui.urlize","kb.ui.notifications","kb.ui.configurationDescription","kb.ui.protected","kb.ui.extractorInfo","kb.ui.sapiInput","kb.utils.multipartUpload","kb.utils.csv","kb.utils.keyboardShortcuts","kb.utils.appVersion","kb.utils.events","kb.utils.notifications","kb.filters.date","kb.filters.filesize","kb.filters.webalize","kb.filters.duration","kb.sapi.sapiService","kb.sapi.eventsService","kb.sapi.errorHandler","kb.syrup.asyncRunner","kb.templates"])}).call(this),function(){angular.module("kb.exceptionHandler",["kb.exceptionHandler.logger"]).factory("$exceptionHandler",["$window","$log","kbLogger",function(a,b,c){return a.onerror=jQuery.proxy(c.onError,c),function(a,d){return c.logException(a,d),b.error.apply(b,arguments)}}])}.call(this),function(){angular.module("kb.exceptionHandler.logger",[]).factory("kb.Logger",["$window",function(a){var b;return b=function(){function b(){}return b.prototype.onError=function(a,b,c){return this.log({message:a,file:b,lineNumber:c})},b.prototype.log=function(b){var c,d;return c=angular.extend({},b,{href:null!=(d=a.location)?d.href:void 0}),this.logRaw(c)},b.prototype.logRaw=function(a){return jQuery.ajax({url:"/utils/errors",method:"POST",contentType:"application/json",data:JSON.stringify(a),dataType:"json"})},b.prototype.logException=function(a){return this.log({message:a.message,stackTrace:a.stack})},b}()}]).factory("kbLogger",["kb.Logger",function(a){return new a}])}.call(this),function(){angular.module("kb.filters.date",[]).filter("kbdate",["$filter",function(a){var b,c;return c=a("date"),b=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d):(\d\d)([+-])(\d\d):?(\d\d)?$/,function(a,d){return a&&a.match(b)?c(a,d):a}}])}.call(this),function(){angular.module("kb.filters.duration",[]).filter("kbDuration",function(){return function(a){var b;switch(b=function(a,b,c){var d;return d=Math.round(2*a)/2,d>1?""+d+" "+c:""+d+" "+b},!1){case!(60>a):return b(a,"sec","secs");case!(3600>a):return b(a/60,"min","mins");default:return b(a/3600,"hour","hours")}}})}.call(this),function(){angular.module("kb.filters.filesize",[]).filter("kbfilesize",function(){var a;return a=function(a){"use strict";function b(a){var b,i,j,k,l,m,n,o,p,q="",r=!0,s=!1;if(void 0!==arguments[3]?(k=arguments[1],l=arguments[2],r=arguments[3]):("boolean"==typeof arguments[1]?l=arguments[1]:k=arguments[1],"boolean"==typeof arguments[2]&&(r=arguments[2])),isNaN(a)||void 0!==k&&isNaN(k))throw Error("Invalid arguments");if(l=l===!0,r=r===!0,k=l?1:void 0===k?2:parseInt(k,c),j=Number(a),i=0>j,i&&(j=-j),0===j)q="0B";else for(r?(n=h.all.increments,b=h.all.nth):(n=h.bitless.increments,b=h.bitless.nth);b--;)if(m=n[b][1],o=n[b][0],j>=m){f.test(o)&&(s=!0,k=0),q=(j/m).toFixed(k),!s&&l&&(r&&e.test(o)&&(o=o.toLowerCase()),o=o.charAt(0),p=d.exec(q),null!==p&&void 0!==p[1]&&g.test(p[1])&&(q=parseInt(q,c))),q+=o;break}return i&&(q="-"+q),q}var c=10,d=/\.(.*)/,e=/b$/,f=/^B$/,g=/^0$/,h={all:{increments:[["B",1],["Kb",128],["KB",1024],["Mb",131072],["MB",1048576],["Gb",1342e5],["GB",1074e6],["Tb",1374e8],["TB",11e11],["Pb",1407e11],["PB",1126e12]],nth:11},bitless:{increments:[["B",1],["KB",1024],["MB",1048576],["GB",1073741824],["TB",1099511627776],["PB",1126e12]],nth:6}};return b}(this),function(b,c){return null==c&&(c="N/A"),angular.isNumber(b)?a(b,2,!1):c}})}.call(this),function(){angular.module("kb.filters.webalize",[]).filter("kbwebalize",function(){var a,b,c;return a=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g},{base:"-",letters:/\s/g}],c={},b=function(b){var d,e,f,g,h;if(f="_"+b,d=c[f])return d;for(g=0,h=a.length;h>g;g++)e=a[g],b=b.replace(e.letters,e.base);return c[f]=b},function(a){return b(a).toLowerCase().replace(/\ /g,"-").replace(/[^a-z0-9\-]/g,"")}})}.call(this),function(){angular.module("kb.i18n",[],["$provide",function(a){var b;return b={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"},a.value("$locale",{DATETIME_FORMATS:{MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"yyyy-MM-dd HH:mm",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,macFrac:0,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3,maxFrac:3},{minInt:1,minFrac:2,macFrac:0,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3,maxFrac:2}],CURRENCY_SYM:"$"},pluralCat:function(a){return 1===a&&returnPLURAL_CATEGORY.ONE,returnPLURAL_CATEGORY.OTHER},id:"en-us"})}])}.call(this),function(){angular.module("kb.sapi.errorHandler",["ui.bootstrap.modal","ui.bootstrap.tpls"]).factory("kbSapiErrorHandler",["$modal",function(a){var b;return b=void 0,b={remainingTimeText:function(a){var b;return b=void 0,b=Math.round((a-new Date)/6e4),b>0?"after "+b+" minutes.":" in few minutes."},handleError:function(b){var c,d,e;return e=!1,b.code&&b.code>=400&&b.code<500&&(e=!0),c=void 0,c=b.message||b.error||"Unknown error during communication with API","maintenance"===b.status&&(c=b.reason,c+=". Please repeat the action "+this.remainingTimeText(new Date(b.estimatedEndTime))),d=a.open({template:'<div class="modal-header">\n<h4 class="modal-title"><span ng-show="!userError">Application error</span><span ng-show="userError">User error</span></h4>\n</div>\n<div class="modal-body">\n<p>{{ message }}</p>\n<p ng-show="exceptionId && !userError">\n  Exception ID: <strong>{{ exceptionId }}</strong>\n</p>\n</div>\n<div class="modal-footer">\n<button class="btn btn-danger" ng-click="close()">Close</button>\n</div>',resolve:{message:function(){return c},userError:function(){return e},exceptionId:function(){return b.exceptionId}},controller:["$scope","$modalInstance","message","exceptionId","userError",function(a,b,c,d,e){return a.message=c,a.exceptionId=d,a.userError=e,a.close=function(){return b.close()}}]})}}}])}.call(this),function(){!function(a){var b;return a.module("kb.sapi.eventsService",["kb.sapi.sapiService"]).factory("kbSapiEventsService",["kbSapiService",function(a){return function(c,d){return null==d&&(d=null),new b(c,a,d)}}]),b=function(){function b(a,b){this.eventsUrl=a,this.storageService=b,this.events=[],this.olderEventsLoading=!1,this.newEventsLoading=!1,this.hasOlderEvents=!0,this.loaded=!1,this.defaultParams={limit:50,offset:0}}return b.prototype.setDefaultParam=function(a,b){return this.defaultParams[a]=b,this},b.prototype.load=function(a){var b;return b=this,this._load(a).success(function(a){return b.events=b.uniqEvents(b.events.concat(a)),b.events.length?void 0:b.hasOlderEvents=!1})},b.prototype.refresh=function(){var a;return a=this,this.newEventsLoading=!0,this.hasOlderEvents=!0,this.load().success(function(b){return a.newEventsLoading=!1,a.events=b})},b.prototype.loadNewEvents=function(){var a,b;return a=this,b=_.max(this.events,function(a){return a.id}),this.newEventsLoading=!0,this._load({sinceId:b.id}).success(function(b){return a.newEventsLoading=!1,a.events=a.uniqEvents(a.events.concat(b))})},b.prototype.uniqEvents=function(a){return _.uniq(a,function(a){return a.id})},b.prototype.loadOlderEvents=function(){var a,b;return a=this,b=_.min(this.events,function(a){return a.id}),this.olderEventsLoading=!0,this._load({maxId:b.id}).success(function(b){return a.olderEventsLoading=!1,a.events=a.uniqEvents(a.events.concat(b)),b.length?void 0:a.hasOlderEvents=!1})},b.prototype._load=function(b){var c;return c=this,this.storageService.http({url:this.storageService.url(this.eventsUrl),method:"GET",params:a.extend({},this.defaultParams,b)}).error(function(a,b,d,e){return c.newEventsLoading=!1,c.olderEventsLoading=!1,c.storageService.errorHandler(a,b,d,e)}).success(function(a){return c.loaded=!0})},b}()}(window.angular)}.call(this),function(){var a={}.hasOwnProperty,b=function(a,b){return function(){return a.apply(b,arguments)}};!function(c){var d,e;return c.module("kb.sapi.sapiService",["kb.utils.csv","kb.utils.multipartUpload"]).factory("kbSapiService",["kbSapiServiceFactory",function(a){return a()}]).factory("kbSapiServiceFactory",["$http","$rootScope","kbCsv","kbMultipartUpload","$q","$timeout",function(a,b,c,e,f,g){return function(){return new d(a,b,c,e,f,g)}}]),e=function(){function b(a){this.data=a}return b.prototype.canManageTokens=function(){return this.data.canManageTokens},b.prototype.canCreateBucket=function(){return this.data.canManageBuckets},b.prototype.canWriteBucket=function(a){return"write"===this.data.bucketPermissions[a]||"manage"===this.data.bucketPermissions[a]},b.prototype.canManageBucket=function(a){return"manage"===this.data.bucketPermissions[a]},b.prototype.setBucketPermission=function(a,b){return this.data.bucketPermissions[a]=b},b.prototype.canAccessComponent=function(a){return this.data.componentAccess[a]},b.prototype.hasAccessToBuckets=function(){var b,c,d,e;b=0,e=this.data.bucketPermissions;for(c in e)a.call(e,c)&&(d=e[c],b++);return b>0},b.prototype.isAdminToken=function(){return!!this.data.admin},b}(),d=function(){function a(a,c,d,e,f,g){this.$http=a,this.$rootScope=c,this.csv=d,this.multipartUpload=e,this.$q=f,this.$timeout=g,this.errorHandler=b(this.errorHandler,this),this.setVerifiedToken=b(this.setVerifiedToken,this),this.apiToken="",this.token={},this.endpoint=this.defaultEndpoint="https://connection.keboola.com",this.consoleUrl="https://storage-api-console.keboola.com",this.apiVersion="v2"}return a.prototype.isAuthenticated=function(){return""!==this.apiToken},a.prototype.setApiToken=function(a){return this.apiToken=a,this},a.prototype.verifyAndSetToken=function(a,b){return this.$http({url:this.url("/storage/tokens/verify"),method:"GET",headers:{"x-storageapi-token":a}}).success(this.setVerifiedToken)},a.prototype.setVerifiedToken=function(a){return this.setApiToken(a.token),this.token=new e(a)},a.prototype.http=function(a){return a.headers||(a.headers={}),c.extend(a.headers,{"x-storageapi-token":this.apiToken}),this.$http(a).error(this.errorHandler)},a.prototype.url=function(a){return this.endpoint+"/"+this.apiVersion+a},a.prototype.resetSession=function(){return this.apiToken=""},a.prototype.consoleSignedUrl=function(a){return null==a&&(a="/"),""+this.consoleUrl+a+"?token="+this.apiToken+"&endpoint="+this.endpoint},a.prototype.index=function(){return this.http({url:this.url("/storage"),method:"GET"})},a.prototype.createBucket=function(a,b,c,d){return null==d&&(d="mysql"),this.http({url:this.url("/storage/buckets"),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param({name:b,stage:a,description:c,backend:d})})},a.prototype.linkBucket=function(a,b,c,d){return this.http({url:this.url("/storage/buckets"),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param({name:b,stage:a,sourceProjectId:c,sourceBucketId:d})})},a.prototype.createTable=function(a,b,c){return this.http({url:this.url("/storage/buckets/"+a+"/tables"),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param({name:b,dataString:c.join(",")})})},a.prototype.createTableAsync=function(a,b){return c.isUndefined(b.transactional)||(b.transactional=Number(b.transactional)),this.http({url:this.url("/storage/buckets/"+a+"/tables-async"),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(b)})},a.prototype.createTableFromSnapshot=function(a,b,c){return null==c&&(c=null),this.createTableAsync(a,{snapshotId:b,name:c})},a.prototype.rollbackTableFromSnapshot=function(a,b){return this.http({url:this.url("/storage/tables/"+a+"/rollback"),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param({snapshotId:b})})},a.prototype.getTable=function(a){return this.http({url:this.url("/storage/tables/"+a),method:"GET"})},a.prototype.createTableSnapshot=function(a,b){return null==b&&(b=null),this.http({url:this.url("/storage/tables/"+a+"/snapshots"),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param({description:b})})},a.prototype.getTableSnapshots=function(a,b){return this.http({url:this.url("/storage/tables/"+a+"/snapshots"),method:"GET",params:b})},a.prototype.getSnapshot=function(a){return this.http({url:this.url("/storage/snapshots/"+a),method:"GET"})},a.prototype.deleteSnapshot=function(a){return this.http({url:this.url("/storage/snapshots/"+a),method:"DELETE"})},a.prototype.getTables=function(a){return this.http({url:this.url("/storage/tables/"),method:"GET",params:a})},a.prototype.deleteTable=function(a){return this.http({url:this.url("/storage/tables/"+a),method:"DELETE"})},a.prototype.unlinkTable=function(a){return this.http({url:this.url("/storage/tables/"+a),method:"DELETE",params:{unlink:1}})},a.prototype.deleteTableColumn=function(a,b){return this.http({url:this.url("/storage/tables/"+a+"/columns/"+b),method:"DELETE"})},a.prototype.addTableColumn=function(a,b){return this.http({url:this.url("/storage/tables/"+a+"/columns/"),method:"POST",params:{name:b}})},a.prototype.addTableColumnToIndexed=function(a,b){return this.http({url:this.url("/storage/tables/"+a+"/indexed-columns"),method:"POST",params:{name:b}})},a.prototype.removeTableColumnFromIndexedColumns=function(a,b){return this.http({url:this.url("/storage/tables/"+a+"/indexed-columns/"+b),method:"DELETE"})},a.prototype.createTablePrimaryKey=function(a,b){return this.http({url:this.url("/storage/tables/"+a+"/primary-key"),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param({columns:b})})},a.prototype.removeTablePrimaryKey=function(a){return this.http({url:this.url("/storage/tables/"+a+"/primary-key"),method:"DELETE"})},a.prototype.deleteTableRows=function(a,b){return this.http({url:this.url("/storage/tables/"+a+"/rows"),method:"DELETE",params:b})},a.prototype.truncateTable=function(a){return this.deleteTableRows(a)},a.prototype.updateTable=function(a,b){return this.http({url:this.url("/storage/tables/"+a),method:"PUT",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(b)})},a.prototype.createAliasTable=function(a,b){return this.http({url:this.url("/storage/buckets/"+a+"/table-aliases"),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(b)})},a.prototype.setAliasTableFilter=function(a,b){return this.http({url:this.url("/storage/tables/"+a+"/alias-filter"),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(b)})},a.prototype.removeAliasTableFilter=function(a){return this.http({url:this.url("/storage/tables/"+a+"/alias-filter"),method:"DELETE"})},a.prototype.enableAliasTableColumnsAutoSync=function(a){return this.http({url:this.url("/storage/tables/"+a+"/alias-columns-auto-sync"),method:"POST"})},a.prototype.disableAliasTableColumnsAutoSync=function(a){return this.http({url:this.url("/storage/tables/"+a+"/alias-columns-auto-sync"),method:"DELETE"})},a.prototype.deleteTableAttribute=function(a,b){return this.http({url:this.url("/storage/tables/"+a+"/attributes/"+b),method:"DELETE"})},a.prototype.saveTableAttribute=function(a,b,d,e){var f;return f={value:d},c.isUndefined(e)||(f["protected"]=e),this.http({url:this.url("/storage/tables/"+a+"/attributes/"+b),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(f)}).success(function(a){})},a.prototype.deleteBucketAttribute=function(a,b){return this.http({url:this.url("/storage/buckets/"+a+"/attributes/"+b),method:"DELETE"})},a.prototype.saveBucketAttribute=function(a,b,d,e){var f;return f={value:d},c.isUndefined(e)||(f["protected"]=e),this.http({url:this.url("/storage/buckets/"+a+"/attributes/"+b),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(f)})},a.prototype.deleteBucket=function(a,b){return this.http({url:this.url("/storage/buckets/"+a),method:"DELETE",params:{force:b}})},a.prototype.errorHandler=function(a,b,c,d){return _.isEmpty(a)?void 0:this.$rootScope.$broadcast("storageError",a)},a.prototype.getBucketsWithTables=function(a,b){var d,e,f,g,h,i,j,k;return null==a&&(a=null),null==b&&(b=null),h=this,d=[],j=[],k=[],e=this.getBuckets(b).success(function(a,b){return j=a}).error(function(){return h.bucketsLoading=!1}),i=this.getTables(a).success(function(a){return k=a}),f=this.$q.defer(),this.$q.all([e,i]).then(function(){var a;return a={},c.forEach(k,function(b){return a[b.bucket.id]||(a[b.bucket.id]=[]),a[b.bucket.id].push(b)}),c.forEach(j,function(b){return b.tables=[],a[b.id]?b.tables=a[b.id]:void 0}),c.forEach(_.sortBy(j,function(a){return a.id}),function(a){return d.push(a)}),f.resolve(d)}),g=f.promise,g.success=function(a){return g.then(function(b){return a(b.data,b.status,b.headers)}),g},g},a.prototype.getBuckets=function(a){return this.http({url:this.url("/storage/buckets/"),method:"GET",params:a})},a.prototype.getSharedBuckets=function(a){return this.http({url:this.url("/storage/shared-buckets/"),method:"GET",params:a})},a.prototype.shareBucket=function(a){return this.http({url:this.url("/storage/buckets/"+a+"/share"),method:"POST"})},a.prototype.unshareBucket=function(a){return this.http({url:this.url("/storage/buckets/"+a+"/share"),method:"DELETE"})},a.prototype.getBucket=function(a){return this.http({url:this.url("/storage/buckets/"+a),method:"GET"})},a.prototype.exportUrl=function(a,b){return this.url("/storage/tables/"+a+"/export"+(b?"?limit="+b:""))},a.prototype.exportDownloadUrl=function(a,b){return this.url("/storage/tables/"+a+"/export?token="+this.apiToken+(b?"&limit="+b:""))},a.prototype.saveTableData=function(a,b,d){var e;return e=c.extend({},d,{dataString:b}),c.isUndefined(e.incremental)||(e.incremental=Number(e.incremental)),c.isUndefined(e.partial)||(e.partial=Number(e.partial)),this.http({url:this.url("/storage/tables/"+a+"/import"),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(e)})},a.prototype.saveTableDataAsync=function(a,b){return c.isUndefined(b.incremental)||(b.incremental=Number(b.incremental)),c.isUndefined(b.partial)||(b.partial=Number(b.partial)),this.http({url:this.url("/storage/tables/"+a+"/import-async"),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(b)})},a.prototype.tableData=function(a,b,d){var e,f,g,h;return null==b&&(b={}),null==d&&(d=null),e=this.csv,f=this.$q.defer(),g=c.isNumber(b)?{limit:b}:b,this.http({url:this.exportUrl(a)+"?"+$.param(g),method:"GET"}).success(function(a){var b;return b=e.parse(a),b={header:b.shift(),data:b},d&&d(b),f.resolve(b)}).error(function(a,b,c,d){return f.reject({data:a,status:b,heders:c,config:d})}),h=f.promise,h.success=function(a){return h.then(function(b){return a(b)}),h},h.error=function(a){return h.then(null,function(b){return a(b.data,b.status,b.headers)}),h},h},a.prototype.tableDataArray=function(a,b,d){return null==b&&(b={}),null==d&&(d=null),this.tableData(a,b,d).then(function(a){var b;return b=[],c.forEach(a.data,function(c){return b.push(_.object(a.header,c))}),b})},a.prototype.getTokens=function(){return this.http({url:this.url("/storage/tokens/"),method:"GET"})},a.prototype.getToken=function(a){return this.http({url:this.url("/storage/tokens/"+a),method:"GET"})},a.prototype.createToken=function(a){var b;return b={description:a.description,expiresIn:a.expiresIn,canManageBuckets:a.canManageBuckets,canReadAllFileUploads:a.canReadAllFileUploads},c.forEach(a.bucketPermissions,function(a,c){return b["bucketPermissions["+c+"]"]=a}),a.canManageBuckets||c.forEach(a.componentAccess,function(a,c){return b["componentAccess["+c+"]"]=a}),this.http({url:this.url("/storage/tokens/"),method:"POST",params:b}).success(function(b,d){return c.copy(b,a)})},a.prototype.saveToken=function(a){var b;return b={description:a.description},c.forEach(a.bucketPermissions,function(a,c){return b["bucketPermissions["+c+"]"]=a}),a.canManageBuckets||c.forEach(a.componentAccess,function(a,c){return b["componentAccess["+c+"]"]=a}),this.http({url:this.url("/storage/tokens/"+a.id),method:"PUT",params:b}).success(function(b,d){return c.copy(b,a)})},a.prototype.refreshToken=function(a){var b;return b=this,this.http({url:this.url("/storage/tokens/"+a.id+"/refresh"),method:"POST"}).success(function(d,e){return a.token===b.apiToken&&b.verifyAndSetToken(d.token),c.copy(d,a)})},a.prototype.deleteToken=function(a){return this.http({url:this.url("/storage/tokens/"+a),method:"DELETE"})},a.prototype.shareToken=function(a,b,c){return this.http({url:this.url("/storage/tokens/"+a+"/share"),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param({recipientEmail:b,message:c})})},a.prototype.getFiles=function(a){return this.http({url:this.url("/storage/files"),method:"GET",params:a})},a.prototype.deleteFile=function(a){return this.http({url:this.url("/storage/files/"+a),method:"DELETE"})},a.prototype.prepareFileUpload=function(a){return this.http({url:this.url("/storage/files/prepare"),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(a)})},a.prototype.getJobs=function(a){return this.http({url:this.url("/storage/jobs"),method:"GET",params:a})},a.prototype.getJob=function(a){return this.http({url:this.url("/storage/jobs/"+a),method:"GET"})},a.prototype.resolveAsyncRequest=function(a){var b,c,d,e,f;return b=this.$q.defer(),f=this,d=function(a){return f.errorHandler(a),b.reject(a)},e=function(a){return b.resolve(a)},c=function(a){return f.pollJobUntilDone(a).then(function(a){return"success"===a.status&&e(a.results),"error"===a.status?d(a.error):void 0},function(a){return d(a)})},a.success(function(a){return c(a.id)}).error(function(a){return d(a)}),b.promise},a.prototype.pollJobUntilDone=function(a,b){var c,d,e,f,g,h;return null==b&&(b=20),e=this.$q.defer(),h=this,c=0,g=function(a){return"success"===a.status||"error"===a.status?void e.resolve(a):d()},f=function(a){return h.errorHandler(a),e.reject(a)},d=function(){return h.$timeout(function(){return c++,c>=b?void f({error:"Timeout after "+b+" requests"}):h.getJob(a).success(g).error(f)},Math.min(100*Math.pow(2,c)+Math.round(100*Math.random()),6e4),!1)},d(),e.promise},a.prototype.generateId=function(){return this.http({url:this.url("/storage/tickets"),method:"POST"}).error(this.errorHandler)},a.prototype.getComponents=function(a){return this.http({url:this.url("/storage/components"),method:"GET",params:a}).error(this.errorHandler)},a.prototype.deleteComponentConfiguration=function(a,b){return this.http({url:this.url("/storage/components/"+a+"/configs/"+b),method:"DELETE"})},a.prototype.addComponentConfiguration=function(a,b){return this.http({url:this.url("/storage/components/"+a+"/configs"),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(b)})},a.prototype.updateComponentConfiguration=function(a,b,c){return this.http({url:this.url("/storage/components/"+a+"/configs/"+b),method:"PUT",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(c)})},a.prototype.getComponentConfiguration=function(a,b){return this.http({url:this.url("/storage/components/"+a+"/configs/"+b),method:"GET"})},a.prototype.getCredentials=function(){return this.http({url:this.url("/storage/credentials"),method:"GET"}).error(this.errorHandler)},a.prototype.getBucketCredentials=function(a){return this.http({url:this.url("/storage/buckets/"+a+"/credentials"),method:"GET"}).error(this.errorHandler)},a.prototype.createBucketCredentials=function(a,b){return this.http({url:this.url("/storage/buckets/"+a+"/credentials"),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param({name:b})})},a.prototype.deleteBucketCredentials=function(a){return this.http({url:this.url("/storage/credentials/"+a),method:"DELETE"})},a}()}(window.angular)}.call(this),function(){angular.module("kb.syrup.asyncRunner",["kb.config","kb.sapi.errorHandler"]).factory("kbSyrupAsyncRunner",["$http","kb.components","kbSapiErrorHandler","$q","kb.config",function(a,b,c,d,e){
var f,g,h;return f=function(){function d(a,b,c){this.$http=a,this.$q=b,this.jobUriTemplate=c}return d.prototype.call=function(b){var c,d,e;return d=this.httpParams(b),c=this.$q.defer(),e=this,a(d).then(function(a){var b;return b=e.runEnd(a),c.resolve(b)},function(a){return e.handleError(a),c.reject(a)}),c.promise},d.prototype.httpParams=function(a){var b;return a.method||(a.method="run"),a.data||(a.data={}),b={data:a.data,url:this.uri(a.component,a.method),method:"POST",headers:{"X-StorageApi-Token":a.token}}},d.prototype.uri=function(a,c){var d,e;return d=_.find(b,function(b){return b.id===a}),e=d&&d.uri?d.uri:a,e+"/"+c},d.prototype.runEnd=function(a){var b;return b={jobUri:this.jobUri(a.data.id),jobId:a.data.id}},d.prototype.jobUri=function(a){return _.template(this.jobUriTemplate)({jobId:a})},d.prototype.handleError=function(a){return c.handleError(a.data)},d}(),g=(null!=(h=e.syrup)?h.jobUriTemplate:void 0)||"jobs#/job/<%= jobId %>",new f(a,d,g)}])}.call(this),function(){angular.module("kb.ui.autoComplete",[]).directive("kbAutoComplete",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e,f;return f=a.$eval(c.kbAutoComplete)||{},e=function(b,c){var e;return(null!=(e=c.item)?e.value:void 0)?a.$apply(function(){return d.$setViewValue(c.item.value)}):void 0},f.change?f.change=function(a,b){return f.change(a,b),e(a,b)}:f.change=e,b.autocomplete(f)}}})}.call(this),function(){angular.module("kb.ui.check",[]).directive("kbCheck",function(){return{restrict:"E",require:"ngModel",template:'<i class="fa"></i>',link:function(a,b,c,d){return d.$render=function(){var a;return a=b.find("i"),a.removeClass("fa-check"),a.removeClass("fa-times"),a.addClass(d.$viewValue?"fa-check":"fa-times")}}}})}.call(this),function(){angular.module("kb.ui.clickToggle",[]).directive("kbClickToggle",["$parse",function(a){return function(b,c,d){var e,f,g;return e=a(d.kbClickToggle),f=e.assign,g=function(a){return b.$apply(function(){return f(b,!e(b))})},c.bind("click",g),c.bind("$destroy",function(){return c.unbind("click",g)})}}])}.call(this),function(){angular.module("kb.ui.codemirror",["kb.config"]).directive("kbCodemirror",["$timeout","$window","kb.config",function(a,b,c){return{restrict:"A",require:"ngModel",link:function(d,e,f,g){var h;return h=angular.extend({},c.codemirror||{},d.$eval(f.kbCodemirror)),a(function(){var a;return a=CodeMirror.fromTextArea(e[0],h),h.cursorPos&&(a.setCursor(h.cursorPos),b.scrollTo(a.cursorCoords().left,a.cursorCoords().top)),a.on("change",function(a){var b;return b=a.getValue(),g.$setViewValue(b)}),a.on("blur",function(a){return angular.element(a.getWrapperElement()).removeClass("focused")}),a.on("focus",function(a){return angular.element(a.getWrapperElement()).addClass("focused")}),g.$formatters.push(function(a){if(angular.isUndefined(a)||null===a)return"";if(angular.isObject(a)||angular.isArray(a))throw new Error("ui-codemirror cannot use an object or an array as a model");return a}),g.$render=function(){return a.setValue(g.$viewValue)}})}}}])}.call(this),function(){angular.module("kb.ui.configurationDescription",["kb.sapi.sapiService","kb.ui.inlineEdit"]).directive("kbConfigurationDescription",["kbSapiService",function(a){return{template:'<kb-inline-edit-textarea value="configuration.description" edit-title="Click to edit configuration description" placeholder="Describe the confguration..." on-save="saveDescription(newValue)"></kb-inline-edit-textarea>',restrict:"E",scope:{componentId:"=",configuration:"="},link:function(b){return b.saveDescription=function(){var c;return c={name:b.configuration.name,description:b.configuration.description},a.updateComponentConfiguration(b.componentId,b.configuration.id,c)}}}}])}.call(this),function(){angular.module("kb.ui.confirm",["kb.config","ui.bootstrap.modal","ngSanitize"]).factory("kbConfirm",["$modal",function(a){var b,c;return c={header:"",message:"",cancelButton:{label:"Cancel",type:""},confirmButton:{label:"Confirm",type:"primary"}},b={confirm:function(b){return a.open({templateUrl:"kb/ui/confirm/templates/confirm.html",resolve:{params:function(){return jQuery.extend(!0,{},c,b)}},controller:["$scope","$modalInstance","params",function(a,b,c){return a.params=c,a.close=function(){return b.dismiss()},a.confirm=function(){return b.close()}}]})}}}]).directive("kbConfirm",["kbConfirm","$parse",function(a,b){return{restrict:"A",link:function(c,d,e){var f;f=b(e.onConfirm),d.on("click",function(){var b,d;return d={header:e.header,message:e.message,confirmButton:{}},""!==e.confirmLabel&&(d.confirmButton.label=e.confirmLabel),""!==e.confirmType&&(d.confirmButton.type=e.confirmType),b=a.confirm(d),b.result.then(function(){return f(c)})})}}}])}.call(this),function(){angular.module("kb.ui.copyButton",["kb.config"]).directive("kbCopyButton",["$timeout","kb.config",function(a,b){var c,d,e,f;return d=null!=(e=b.ui)&&null!=(f=e["copy-button"])?f.swfPath:void 0,d||(d="/components/zeroclipboard/ZeroClipboard.swf"),c=new ZeroClipboard(null,{moviePath:d,allowScriptAccess:"always",trustedDomains:["*"]}),c.on("complete",function(){return angular.element(c.htmlBridge).attr("data-original-title",angular.element(this).attr("copy-message")),angular.element(c.htmlBridge).tooltip("show")}),c.on("load",function(a){return angular.element(a.htmlBridge).tooltip()}),c.on("mouseover",function(){return angular.element(c.htmlBridge).attr("data-original-title",angular.element(this).attr("title")),angular.element(c.htmlBridge).tooltip("show")}),{restrict:"E",scope:{copyValue:"=",copyTitle:"@",copyMessage:"@"},transclude:!0,template:'<span ng-transclude class="kb-copy-button" title="{{ copyTitle }}" data-clipboard-text="{{ copyValue }}" copy-message="{{ copyMessage }}"></span>',link:function(a,b){var d;return d=b.find(".kb-copy-button"),c.glue(d),a.$on("$destroy",function(){return c.unglue(d)})}}}])}.call(this),function(){angular.module("kb.ui.datetime",["ui.bootstrap.tooltip","ui.bootstrap.tpls"]).directive("kbDatetime",["$filter",function(a){var b,c;return c=a("date"),b=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d):(\d\d)([+-])(\d\d):?(\d\d)?$/,{restrict:"E",transclude:!0,replace:!0,scope:{datetime:"=",emptyValue:"@"},template:'<span ng-cloak ng-class="{\'muted\': isEmpty()}">\n  {{ formattedValue() }}\n  <i class="kb-datetime fa fa-clock-o" tooltip="{{ tooltipTitle }}" ng-show="isDatetime()"></i>\n</span>',link:function(a,d,e){return a.tooltipTitle="",a.resolveEmptyValue=function(){return a.emptyValue?a.emptyValue:"N/A"},a.isEmpty=function(){return!a.datetime},a.isDatetime=function(){return!(!a.datetime||!a.datetime.match(b))},a.$watch("datetime",function(){return a.tooltipTitle=a.isDatetime()?"Original time: "+a.datetime:""}),a.formattedValue=function(){return a.isEmpty()?a.resolveEmptyValue():a.isDatetime()?c(a.datetime,"fullDate"):a.datetime}}}}])}.call(this),function(){angular.module("kb.ui.duration",["kb.filters.duration"]).directive("kbDuration",function(){return{restrict:"E",scope:{duration:"=",emptyValue:"@"},replace:!0,template:'<span title="{{ duration }} seconds">\n  <span ng-hide="isEmpty()">{{ duration | kbDuration }}</span>\n  <span ng-show="isEmpty()" class="muted">{{ getEmptyValue() }}</span>\n</span>',link:function(a){return a.isEmpty=function(){return null===a.duration||angular.isUndefined(a.duration)},a.getEmptyValue=function(){return angular.isUndefined(a.emptyValue)?"N/A":a.emptyValue}}}})}.call(this),function(){angular.module("kb.ui.extractorInfo",[]).directive("kbExtractorInfo",function(){return{restrict:"E",scope:{configuration:"=",authorizedFor:"="},template:'<div class="extractor-info text-muted small">\n  <p ng-show="authorizedFor">\n    Authorized for <br />{{ authorizedFor }}\n  </p>\n  <p>\n    Created by <br />{{ configuration.creatorToken.description }}\n  </p>\n  <p>\n    Created on <br /><kb-datetime datetime="configuration.created"></kb-datetime>\n  </p>',replace:!0}})}.call(this),function(){angular.module("kb.ui.focus",[]).directive("kbFocus",["$timeout","$parse",function(a,b){return function(b,c,d){var e;return e=function(){return a(function(){var a;return a=c.find(":input").first(),a.length?a.focus():c.focus()},50)},d.kbFocus?b.$watch(d.kbFocus,function(a){return a?e():void 0}):void e()}}])}.call(this),function(){!function(a){var b,c;return c=a.module("kb.ui.inlineEdit",[]),b=function(b){return function(){return{restrict:"E",scope:{value:"=",disabled:"=",onSave:"&",placeholder:"@",editTitle:"@"},templateUrl:b,controller:["$scope","$element","$attrs","$timeout",function(b,c,d,e){var f;return c.addClass("kb-inline-edit"),c.addClass(c[0].tagName.toLowerCase()),b.tooltipTitle="",f=function(){return b.isEditing||b.disabled?b.tooltipTitle="":b.tooltipTitle=b.editTitle},b.$watch("disabled",function(a){return a?c.addClass("disabled"):c.removeClass("disabled"),b.isEditing&&!a?b.edit():b.cancel(),f()}),b.$watch("isEditing",f),b.$watch("editTitle",f),b.edit=function(){return b.disabled?void 0:(b.isEditing=!0,b.editValue=b.value,a.element("body").bind("click.inlineEdit",function(){return b.$apply(function(){return b.cancel()}),!0}),c.bind("click.inlineEdit",function(a){return a.stopPropagation()}),c.bind("keyup.inlineEdit",function(a){return 13===a.keyCode&&"kb-inline-edit-textarea"!==c.get(0).tagName.toLocaleLowerCase()&&b.$apply(b.save),27===a.keyCode&&b.$apply(b.cancel),!1}),e(function(){return c.find(":input").not("button").focus()}))},b.cancel=function(){b.isEditing=!1,a.element("body").unbind(".inlineEdit"),c.unbind(".inlineEdit")},b.save=function(){return b.value=b.editValue,a.isFunction(b.onSave)&&e(function(){return b.onSave({newValue:b.editValue})}),b.cancel()}}]}}},c.factory("kbInlineEdit",function(){return b}).directive("kbInlineEdit",b("kb/ui/inline-edit/templates/text.html")).directive("kbInlineEditDatetime",b("kb/ui/inline-edit/templates/datetime.html")).directive("kbInlineEditTextarea",b("kb/ui/inline-edit/templates/textarea.html")).directive("kbInlineEditSelect",function(){var a;return a=b("kb/ui/inline-edit/templates/select.html")(),a.scope.options="=",a}).directive("kbInlineEditMultiselect",function(){var a;return a=b("kb/ui/inline-edit/templates/multiselect.html")(),a.scope.options="=",a})}(window.angular)}.call(this),function(){angular.module("kb.ui.loader",[]).directive("kbLoader",function(){return{restrict:"E",template:'<a kb-loader class="kb-loader">\n  <i class="fa fa-refresh"> </i>\n</a>',replace:!0,link:function(a,b,c){var d;return d=b.find("i"),a.$watch(c.isLoading,function(a){return d.removeClass("fa-spin"),a?d.addClass("fa-spin"):void 0})}}})}.call(this),function(){angular.module("kb.ui.nl2br",[]).directive("kbNl2br",function(){return function(a,b,c){return a.$watch(c.kbNl2br,function(a){var c,d;return null==a&&(a=""),d=a.replace("\r\n","\n"),c=d.split("\n"),b.empty(),angular.forEach(c,function(a,d){var e,f;return f=angular.element("<span></span>"),f.text(a),b.append(f),e=c.length-1===d,e?void 0:b.append(angular.element("<br/>"))})})}})}.call(this),function(){angular.module("kb.ui.notifications",[]).directive("kbNotifications",["kbNotifications","kbEvents",function(a,b){return{template:'<div class="alert alert-{{notification.level}} alert-dismissable"  ng-repeat="notification in notifications">\n    <button type="button" class="close" ng-click="close($index)">\n        <span>×</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div><span ng-bind-html="notification.message"></span></div>\n</div>',restrict:"E",link:function(c){var d;return d=function(){return c.notifications=a.list().reverse()},c.close=function(b){return a.remove(b)},d(),b.subscribe("kbNotifications.change",d)}}}])}.call(this),function(){angular.module("kb.ui.protected",[]).directive("kbProtected",function(){return{restrict:"E",scope:{"protected":"="},transclude:!0,replace:!0,template:'<div class="kb-protected">\n  <span class="locked" ng-show="protected" ng-click="unlock()">\n    <i class="fa fa-fw fa-lock"></i>\n  </span>\n  <span ng-transclude ng-show="!protected"></span>\n</div>',link:function(a){return a.unlock=function(){return a["protected"]=!1}}}})}.call(this),function(){angular.module("kb.ui.runButton",["kb.ui.loader"]).directive("kbRunButton",function(){return{restrict:"E",template:'<button class="btn btn-default run-transformation kb-loader">\n  <i class="fa fa-fw fa-play"> </i>\n</button>',replace:!0,link:function(a,b,c){var d;return d=b.find("i"),a.$watch(c.isDisabled,function(a){return a?b.addClass("disabled"):b.removeClass("disabled")}),a.$watch(c.isRunning,function(a){return b.removeClass("running"),d.removeClass("fa-refresh"),d.removeClass("fa-play"),d.removeClass("fa-spin"),a?(b.addClass("running"),d.addClass("fa-refresh fa-spin")):d.addClass("fa-play")})}}})}.call(this),function(){angular.module("kb.ui.runIcon",["kb.ui.loader"]).directive("kbRunIcon",function(){return{restrict:"E",template:'<span class="kb-loader">\n  <i class="fa fa-fw fa-play"> </i>\n</span>',replace:!0,link:function(a,b,c){var d;return d=b.find("i"),a.$watch(c.isRunning,function(a){return b.removeClass("running"),d.removeClass("fa-refresh"),d.removeClass("fa-play"),d.removeClass("fa-spin"),a?(b.addClass("running"),d.addClass("fa-refresh fa-spin")):d.addClass("fa-play")})}}})}.call(this),function(){angular.module("kb.ui.sapiComponentIcon",[]).directive("kbSapiComponentIcon",[function(){return{template:'<span ng-if="hasIcon()">\n  <img ng-src="{{ url() }}" width="{{ width }}" height="{{ height }}"/>\n</span>\n<span ng-if="!hasIcon()" class=\'kb-default\'>\n  <i class="fa {{ defaultIconClass[component.type] }}" style="font-size: {{ size - 5 }}px; height: {{ size }}px; position: relative; top: 5px"></i>\n</span>',restrict:"E",scope:{component:"=",size:"@"},link:function(a,b){return b.addClass("kb-sapi-component-icon"),a.defaultIconClass={extractor:"fa-cloud-download",writer:"fa-cloud-upload",transformation:"fa-cogs",other:"fa-cogs",recipe:"fa-cogs"},a.hasIcon=function(){return!!a.component["ico"+a.size]},a.url=function(){return a.component["ico"+a.size]}}}}])}.call(this),function(){angular.module("kb.ui.sapiConsoleHref",["kb.sapi.sapiService","kb.config"]).directive("kbSapiConsoleHref",["kbSapiService","$sce","kb.config",function(a,b,c){return{restrict:"E",transclude:!0,scope:{path:"@"},template:'<a href="{{ url() }}" ng-transclude></a>',link:function(a){var d;if(d=function(){return a.path||"/"},!c.projectBaseUrl)throw"'kb.config' property projectBaseUrl is not defined";return a.url=function(){return c.projectBaseUrl?b.trustAsResourceUrl(c.projectBaseUrl+"/storage#"+d()):"/"}}}}])}.call(this),function(){angular.module("kb.ui.sapiEventsTable",["kb.sapi.eventsService","kb.ui.tree"]).directive("kbSapiEventsTable",function(){var a,b,c,d,e,f,g;return f=["storage.tableImportDone"],d=["storage.tableExported"],e=["created","event","id","component","creator"],b=["created","event"],g={table:'<div class="kb-sapi-events-table">\n <div ng-show="events.events.length && events.loaded && !selectedEvent">\n   {{givenHeader}}\n   <table class="table table-striped table-events">\n     <thead>\n       <tr >\n         <th ng-repeat="item in options.header">{{item}}</th>\n       </tr>\n     </thead>\n     <tbody>\n       <tr ng-repeat="event in events.events | orderBy:\'id\':true track by event.id" ng-class="eventClass(event)" ng-click="eventDetail(event)" title="Event id: {{ event.id }}">\n           <td ng-repeat="item in options.header">\n             <span ng-if="item == \'created\'" class="created">{{ event[item] | date:\'fullDate\' }}</span>\n             <span ng-if="item == \'event\'">\n               {{feedMessage(event)}}\n             </span>\n             <span ng-if="item == \'component\'">\n               <p ng-if="component(event[item])">\n                  <kb-sapi-component-icon component="component(event[item])"  size="32"></kb-sapi-component-icon>{{component(event[item]).name}}     </p>\n               <span ng-hide="component(event[item])">{{event[item]}}</span>\n\n             </span>\n             <span ng-if="item == \'id\'">{{event[item]}}</span>\n             <span ng-if="item == \'creator\'">{{event.token.name}}</span>\n           </td>\n       </tr>\n     </tbody>\n   </table>\n   <div class="list-more" ng-show="events.hasOlderEvents">\n     <button ng-click="events.loadOlderEvents()" class="btn btn-default btn-large" ng-disabled="events.olderEventsLoading">More..</button>\n   </div>\n </div>\n <div ng-show="!events.events.length && events.loaded">\n   <div class="well">\n     There are no events yet.\n   </div>\n </div>\n <div ng-show="!events.loaded">\n   <div class="well">\n     <i class="fa fa-refresh fa-spin"></i>\n     Loading events...\n   </div>\n </div>\n  <div class="event-detail" ng-show="selectedEvent">\n        <a ng-click="leaveEventDetail()">\n         <i class="fa fa-chevron-left"></i> Back to events list\n        </a>\n       <h3>Event detail</h3>\n\n         <p class="well message" ng-class="eventClass(selectedEvent)">\n           {{ selectedEvent.message }}\n         </p>\n\n         <p class="well" ng-show="selectedEvent.description">\n           {{ selectedEvent.description }}\n         </p>\n\n         <div class="tab-pane active" id="tableOverview">\n           <table class="table">\n             <tbody>\n               <tr>\n               <td>ID</td>\n               <td>{{ selectedEvent.id }}</td>\n               </tr>\n               <tr>\n               <td>Created</td>\n               <td><kb-datetime datetime="selectedEvent.created"></kb-datetime></td>\n               </tr>\n               <tr>\n               <td>Component</td>\n               <td>{{ selectedEvent.component }}</td>\n               </tr>\n               <tr>\n                 <td>Configuration ID</td>\n                 <td>{{ selectedEvent.configurationId || "N/A" }}</td>\n               </tr>\n               <tr>\n               <td>Run ID</td>\n               <td>{{ selectedEvent.runId || "N/A" }}</td>\n               </tr>\n               <tr>\n               <td>Creator</td>\n               <td>{{ selectedEvent.token.name }}</td>\n               </tr>\n             </tbody>\n           </table>\n         </div>\n\n         <div ng-show="selectedEvent.attachments.length">\n           <h3>Attachments</h3>\n           <ul>\n             <li ng-repeat="attachment in selectedEvent.attachments">\n               <a href="{{ attachment.url }}">\n                 {{ attachment.uploadType }} ({{ attachment.sizeBytes | kbfilesize}})\n               </a>\n             </li>\n           </ul>\n         </div>\n\n         <div ng-show="selectedEvent.params">\n           <h3>Parameters</h3>\n           <kb-tree data="selectedEvent.params"></kb-tree>\n         </div>\n\n         <div ng-show="selectedEvent.performance">\n           <h3>Performance</h3>\n           <kb-tree data="selectedEvent.performance"></kb-tree>\n         </div>\n\n         <div ng-show="selectedEvent.results">\n           <h3>Results</h3>\n           <kb-tree data="selectedEvent.results"></kb-tree>\n         </div>\n\n         <div ng-show="selectedEvent.context">\n           <h3>Context</h3>\n           <kb-tree data="selectedEvent.context"></kb-tree>\n         </div>\n\n        <a ng-click="leaveEventDetail()">\n         <i class="fa fa-chevron-left"></i> Back to events list\n        </a>\n  </div>\n</div>'},c="Deprecated authorization method used.",a={restrict:"E",replace:!0,scope:{events:"=",autoReload:"=",header:"="},template:g.table,controller:["$scope","$element","$compile","$timeout","kb.components",function(a,e,g,h,i){var j,k;return k=null,a.component=function(a){return _.find(i,function(b){return b.id===a})},a.options={header:a.header},(!_.isArray(a.header)||_.isEmpty(a.header))&&(a.options={header:b}),a.selectedEvent=null,a.eventClass=function(a){var b;return a?"error"===a.type?"danger":"warn"===a.type?"warning":"success"===a.type?"success":"storage.tableImportDone"===a.event&&(null!=(b=a.results.warnings)?b.length:void 0)>0?"warning":_.indexOf(f,a.event)>=0?"success":_.indexOf(d,a.event)>=0?"info":"":""},a.eventDetail=function(b){return a.selectedEvent=b},a.leaveEventDetail=function(){return console.log="leave event",a.selectedEvent=null},a.isEmpty=function(a){return!_.size(a||[])},a.eventType=function(a){switch(a.event){case"storage.tableImportError":case"storage.tableImportDone":return{icon:"fa fa-arrow-up",tooltip:"Import action"};case"storage.tableExported":return{icon:"fa fa-arrow-down",tooltip:"Export action"};default:return{icon:"",tooltip:""}}},a.eventTypeTooltip=function(b){return{title:a.eventType(b).tooltip}},a.feedMessage=function(a){var b;return b=a.configurationId?""+a.configurationId+" - ":"",b+=a.message},a.deprecatedAuthorizationTooltip=function(){return{title:c}},a.isDeprecatedAuthorization=function(a){return"deprecated"===a.context.authorization},a.$on("$destroy",function(){return h.cancel(k)}),j=function(){return k=h(function(){var b;return b=function(){return a.autoReload?j():k=null},a.events.loadNewEvents().success(b).error(b)},1e3)},a.$watch("autoReload",function(a){return a&&!k?j():void 0})}]}})}.call(this),function(){angular.module("kb.ui.sapiInput",["ui.bootstrap.typeahead","kb.sapi.sapiService"]).directive("kbSapiInput",["$compile","kbSapiService",function(a,b){var c,d,e;return e=function(a,b){var c,d,e,f,g;if(a.sapiTables=b,a.excludeStages)for(c=function(b){return a.sapiTables=_.filter(a.sapiTables,function(a){return a.bucket.stage!==b})},e=a.excludeStages.split(","),console.log(e),f=0,g=e.length;g>f;f++)d=e[f],c(d);return a.bucketId&&(a.sapiTables=_.filter(b,function(b){return b.bucket.id===a.bucketId})),a.sapiTables=_.map(a.sapiTables,function(a){return a.id})},d=function(c,d,f){var g;return c.sapiTables=[],g='\n<input type="text" ng-model="ngModel" placeholder={{placeholder}} typeahead="id for id in sapiTables| filter:$viewValue|limitTo:15" class="form-control" > </input>\n',d.html(g),b.getTables().success(function(a){return e(c,a)}),a(d.contents())(c)},c={restrict:"E",priority:1e3,scope:{bucketId:"@",excludeStages:"@",ngModel:"=",placeholder:"@"},link:d}}])}.call(this),function(){angular.module("kb.ui.searchFilter",[]).directive("kbSearchFilter",[function(){return{templateUrl:"kb/ui/search-filter/templates/search-filter.html",restrict:"E",scope:{query:"="},link:function(a){return a.remove=function(){return a.query=""},a.hasQuery=function(){return!!a.query}}}}])}.call(this),function(){angular.module("kb.ui.tree",[]).directive("kbTree",["$compile",function(a){var b,c;return c='<div class="kb-tree">\n  <kb-tree-node data="data"></kb-tree-node>\n</div>',b={restrict:"E",transclude:!0,scope:{data:"="},link:function(b,d){return b.$watch("data",function(){var e,f;return e=angular.element(c),f=a(e),f(b),d.html(null).append(e)})}}}]).directive("kbTreeNode",["$compile",function(a){var b,c,d;return d='<div class="kb-tree-node">\n  <div ng-repeat="(key, value) in data">\n    <span class="key">{{ key }}:</span>\n    <kb-tree-node data="value"></kb-tree-node">\n  </div>\n</div>',c='<kb-urlize content="data" class="value">\n</kb-urlize>',b={restrict:"E",replace:!0,transclude:!0,scope:{data:"="},link:function(b,e,f){var g,h;return b.isNode=function(){return angular.isObject(b.data)||angular.isArray(b.data)},h=angular.element(b.isNode()?d:c),g=a(h),g(b),e.empty().replaceWith(h)}}}])}.call(this),function(){angular.module("kb.ui.urlize",[]).directive("kbUrlize",["$compile",function(a){var b,c,d,e,f,g;return e="(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:/\\S*)?",g=function(a,b){var c,d;return d="",/^https?\:\/\//.test(b)||(d="http://"),c=angular.element('<a class="kb-urlize" target="_blank"></a>'),c.attr("href",d+b),c.text(b),a.append(c)},f=function(a,b){var c;return c=angular.element('<span class="kb-urlize"></span>'),c.text(b),a.append(c)},d=new RegExp(e,"g"),c=function(a,b){var c,e,h,i,j,k,l;if(a.empty(),b){if(b=String(b),j=b.match(d),c=b,j)for(k=0,l=j.length;l>k;k++)i=j[k],e=c.split(i),h=e[0],""!==h&&f(a,h),g(a,i),c=e[1];return c?f(a,c):void 0}},b={restrict:"E",scope:{content:"="},link:function(a,b,d){return c(b,a.content)},controller:["$scope","$element",function(a,b){return a.$watch("content",function(){return c(b,a.content)})}]}}])}.call(this),function(){angular.module("kb.utils.appVersion",[]).provider("kbAppVersion",["$sceDelegateProvider",function(a){var b,c,d;d="v1",b="/",this.setVersion=function(a){return d=a,this},this.setBasePath=function(c){return b=c,a.resourceUrlWhitelist(["self",b+"**"]),this},this.versionUrl=function(a){return b+a+"?version="+d},c=this,this.$get=["$sce",function(a){return{version:function(){return d},versionUrl:function(a){return c.versionUrl(a)}}}]}])}.call(this),function(){angular.module("kb.utils.csv",[]).factory("kbCsv",function(){var a;return a=function(){function a(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var b={parse:function(b,c){function d(a){o>m||(m>o&&(o=m,p=[]),p.push(a))}function e(){var a,b,c,d;return c=m,d=m,a=function(a){return q=","}(m)?"":null,null!==a?(b=f(),null!==b?a=[a,b]:(a=null,m=d)):(a=null,m=d),null!==a&&(a=function(a,b){return b}(c,a[1])),null===a&&(m=c),a}function f(){var a,c,e,f,h,i,j,k,l;for(i=m,j=m,a=[],/^[\n\r]/.test(b.charAt(m))?(c=b.charAt(m),m++):(c=null,0===n&&d("[\\n\\r]"));null!==c;)a.push(c),/^[\n\r]/.test(b.charAt(m))?(c=b.charAt(m),m++):(c=null,0===n&&d("[\\n\\r]"));if(null!==a)if(c=g(),null!==c){if(e=[],k=m,l=m,/^[\n\r]/.test(b.charAt(m))?(h=b.charAt(m),m++):(h=null,0===n&&d("[\\n\\r]")),null!==h)for(f=[];null!==h;)f.push(h),/^[\n\r]/.test(b.charAt(m))?(h=b.charAt(m),m++):(h=null,0===n&&d("[\\n\\r]"));else f=null;for(null!==f?(h=g(),null!==h?f=[f,h]:(f=null,m=l)):(f=null,m=l),null!==f&&(f=function(a,b){return b}(k,f[1])),null===f&&(m=k);null!==f;){if(e.push(f),k=m,l=m,/^[\n\r]/.test(b.charAt(m))?(h=b.charAt(m),m++):(h=null,0===n&&d("[\\n\\r]")),null!==h)for(f=[];null!==h;)f.push(h),/^[\n\r]/.test(b.charAt(m))?(h=b.charAt(m),m++):(h=null,0===n&&d("[\\n\\r]"));else f=null;null!==f?(h=g(),null!==h?f=[f,h]:(f=null,m=l)):(f=null,m=l),null!==f&&(f=function(a,b){return b}(k,f[1])),null===f&&(m=k)}if(null!==e){for(f=[],/^[\n\r]/.test(b.charAt(m))?(h=b.charAt(m),m++):(h=null,0===n&&d("[\\n\\r]"));null!==h;)f.push(h),/^[\n\r]/.test(b.charAt(m))?(h=b.charAt(m),m++):(h=null,0===n&&d("[\\n\\r]"));null!==f?a=[a,c,e,f]:(a=null,m=j)}else a=null,m=j}else a=null,m=j;else a=null,m=j;return null!==a&&(a=function(a,b,c){return c.unshift(b),c}(i,a[1],a[2])),null===a&&(m=i),a}function g(){var a,c,e,f,g,i,j,k,l;if(i=m,j=m,a=h(),null!==a){for(c=[],k=m,l=m,b.length>m?(e=b.charAt(m),m++):(e=null,0===n&&d("any character")),null!==e?(f=function(a,b){return b==q}(m,e)?"":null,null!==f?(g=h(),null!==g?e=[e,f,g]:(e=null,m=l)):(e=null,m=l)):(e=null,m=l),null!==e&&(e=function(a,b,c){return c}(k,e[0],e[2])),null===e&&(m=k);null!==e;)c.push(e),k=m,l=m,b.length>m?(e=b.charAt(m),m++):(e=null,0===n&&d("any character")),null!==e?(f=function(a,b){return b==q}(m,e)?"":null,null!==f?(g=h(),null!==g?e=[e,f,g]:(e=null,m=l)):(e=null,m=l)):(e=null,m=l),null!==e&&(e=function(a,b,c){return c}(k,e[0],e[2])),null===e&&(m=k);null!==c?(e=function(a,b,c){return null!==b||c.length}(m,a,c)?"":null,null!==e?a=[a,c,e]:(a=null,m=j)):(a=null,m=j)}else a=null,m=j;return null!==a&&(a=function(a,b,c){return c.unshift(b),c}(i,a[0],a[1])),null===a&&(m=i),a}function h(){var a,c,e,f,g;if(f=m,g=m,34===b.charCodeAt(m)?(a='"',m++):(a=null,0===n&&d('"\\""')),null!==a){for(c=[],e=i();null!==e;)c.push(e),e=i();null!==c?(34===b.charCodeAt(m)?(e='"',m++):(e=null,0===n&&d('"\\""')),null!==e?a=[a,c,e]:(a=null,m=g)):(a=null,m=g)}else a=null,m=g;return null!==a&&(a=function(a,b){return b.join("")}(f,a[1])),null===a&&(m=f),a}function i(){var a,c,e,f;return e=m,f=m,34===b.charCodeAt(m)?(a='"',m++):(a=null,0===n&&d('"\\""')),null!==a?(34===b.charCodeAt(m)?(c='"',m++):(c=null,0===n&&d('"\\""')),null!==c?a=[a,c]:(a=null,m=f)):(a=null,m=f),null!==a&&(a=function(a){return'"'}(e)),null===a&&(m=e),null===a&&(/^[^"]/.test(b.charAt(m))?(a=b.charAt(m),m++):(a=null,0===n&&d('[^"]'))),a}function j(a){a.sort();for(var b=null,c=[],d=0;d<a.length;d++)a[d]!==b&&(c.push(a[d]),b=a[d]);return c}function k(){for(var a=1,c=1,d=!1,e=0;e<Math.max(m,o);e++){var f=b.charAt(e);"\n"===f?(d||a++,c=1,d=!1):"\r"===f||"\u2028"===f||"\u2029"===f?(a++,c=1,d=!0):(c++,d=!1)}return{line:a,column:c}}var l={comma:e,sv:f,line:g,field:h,"char":i};if(void 0!==c){if(void 0===l[c])throw new Error("Invalid rule name: "+a(c)+".")}else c="comma";var m=0,n=0,o=0,p=[],q=",",r=l[c]();if(null===r||m!==b.length){var s=Math.max(m,o),t=s<b.length?b.charAt(s):null,u=k();throw new this.SyntaxError(j(p),t,s,u.line,u.column)}return r},toSource:function(){return this._source}};return b.SyntaxError=function(b,c,d,e,f){function g(b,c){var d,e;switch(b.length){case 0:d="end of input";break;case 1:d=b[0];break;default:d=b.slice(0,b.length-1).join(", ")+" or "+b[b.length-1]}return e=c?a(c):"end of input","Expected "+d+" but "+e+" found."}this.name="SyntaxError",this.expected=b,this.found=c,this.message=g(b,c),this.offset=d,this.line=e,this.column=f},b.SyntaxError.prototype=Error.prototype,b}(),{parse:a.parse,create:function(a){var b;return b=[],a.forEach(function(a){var c;return c=[],a.forEach(function(a){var b;return b=null===a?"":a.toString(),c.push('"'+b.replace(/"/g,'""')+'"')}),b.push(c.join(","))}),b.join("\n")}}})}.call(this),function(){angular.module("kb.utils.events",[]).service("kbEvents",["$q","$rootScope",function(a,b){return{publish:function(c,d){var e,f,g,h;if(!b.$$listeners[c])return[];for(e=[],g=0;g<b.$$listeners[c].length;)e.push(a.defer()),g++;return f={args:d,reject:function(a){e.pop().reject(a)},resolve:function(a){e.pop().resolve(a)}},b.$broadcast(c,f),h=_.map(e,function(a){return a.promise})},subscribe:function(a,c){return b.$on(a,c)},unsubscribe:function(a){angular.isFunction(a)&&a()}}}])}.call(this),function(){angular.module("kb.utils.keyboardShortcuts",[]).factory("kbKeyboardShortcuts",function(){var a;return a=Mousetrap.stopCallback,Mousetrap.stopCallback=function(b,c,d){return a(b,c,d)?!0:"BUTTON"===c.tagName},function(a,b){return angular.forEach(b,function(b,c){return Mousetrap.bind(c,function(){return a.$apply(function(){return a[b]()}),!1}),a.$on("$destroy",function(){return Mousetrap.unbind(c)})})}})}.call(this),function(){var a={}.hasOwnProperty;angular.module("kb.utils.multipartUpload",[]).factory("kbMultipartUpload",function(){return{upload:function(b,c,d){var e,f,g,h,i;e="-----------------------------"+Math.floor(Math.random()*Math.pow(10,8)),f=[];for(h in c)a.call(c,h)&&(i=c[h],f.push("--"+e),g='Content-Disposition: form-data; name="'+h+'"; ',i.filename&&(g+='filename="'+i.filename+'";'),f.push(g),i.type&&f.push("Content-Type: "+i.type),f.push(""),f.push(i.content||i));return f.push("--"+e+"--"),$.ajax({type:"POST",url:b,data:f.join("\r\n"),headers:d,contentType:"multipart/form-data; boundary="+e})}}})}.call(this),function(){angular.module("kb.utils.notifications",["kb.utils.events"]).factory("kbNotifications",["kbEvents",function(a){var b;return new(b=function(){function b(){}return b.prototype.notifications=[],b.prototype.add=function(b,c){return this.notifications.push({level:b,message:c}),a.publish("kbNotifications.change")},b.prototype.remove=function(b){return this.notifications=_.reject(this.notifications,function(a,c){return c===b}),a.publish("kbNotifications.change")},b.prototype.list=function(){return this.notifications},b}())}])}.call(this),angular.module("kb.templates").run(["$templateCache",function(a){
a.put("kb/ui/confirm/templates/confirm.html",'<div class="modal-header">\n    <h4 class="modal-title">{{ params.header }}</h4>\n</div>\n<div class="modal-body">\n    <p ng-bind-html="params.message"></p>\n</div>\n<div class="modal-footer">\n    <button class="btn btn-default" ng-click="close()" kb-focus>{{ params.cancelButton.label }}</button>\n    <button class="btn btn-{{ params.confirmButton.type}}" ng-click="confirm()">{{ params.confirmButton.label }}</button>\n</div>'),a.put("kb/ui/inline-edit/templates/datetime.html",'<span class="static" ng-hide="isEditing" ng-click="edit()" tooltip="{{ tooltipTitle }}">\n  <kb-datetime datetime="value"></kb-datetime>\n   <a class="placeholder" ng-show="!value">\n         <i class="fa fa-pencil-square-o"></i>\n         {{ placeholder }}\n     </a>\n</span>\n<div ng-show="isEditing" class="editing">\n    <div class="input-group">\n        <input type="text" ng-model="editValue" class="form-control" placeholder="{{ placeholder }}"/>\n\n        <div class="input-group-btn">\n            <button class="btn btn-success" ng-click="save()">\n                <i class="fa fa-check" title="save"></i>\n            </button>\n            <button class="btn btn-default" ng-click="cancel()">\n                <i class="fa fa-times" title="Cancel"></i>\n            </button>\n        </div>\n    </div>\n</div>\n\n'),a.put("kb/ui/inline-edit/templates/multiselect.html",'<span class="static" ng-hide="isEditing" ng-click="edit()" tooltip="{{ tooltipTitle }}">\n  <span ng-repeat="val in value">{{ val }}{{ $last ? \'\' : \', \' }}</span>\n  <span class="placeholder" ng-show="!value">{{ placeholder }}</span>\n</span>\n<div ng-show="isEditing" class="editing">\n    <div class="input-group">\n        <select ui-select2="{ width: \'100%\' }" multiple ng-model="editValue"\n                data-placeholder="{{ placeholder }}" >\n            <option ng-repeat="val in options" value="{{ val }}" ng-selected="{{_.contains(token.componentAccess,val)}}">\n                {{ val }}\n            </option>\n        </select>\n        <span class="input-group-btn">\n            <button class="btn btn-success" ng-click="save()">\n                <i class="fa fa-check" title="save"></i>\n            </button>\n            <button class="btn btn-default" ng-click="cancel()">\n                <i class="fa fa-times" title="Cancel"></i>\n            </button>\n        </span>\n    </div>\n</div>'),a.put("kb/ui/inline-edit/templates/select.html",'<span class="static" ng-hide="isEditing" ng-click="edit()" tooltip="{{ tooltipTitle }}">\n  {{ value }}\n  <span class="placeholder" ng-show="!value">{{ placeholder }}</span>\n</span>\n<div ng-show="isEditing" class="editing">\n    <div class="input-group">\n        <select ng-options="value for value in options" class="form-control" ng-model="editValue"></select>\n\n        <span class="input-group-btn">\n            <button class="btn btn-success" ng-click="save()">\n                    <i class="fa fa-check" title="save"></i>\n            </button>\n            <button class="btn btn-default" ng-click="cancel()">\n                <i class="fa fa-times" title="Cancel"></i>\n            </button>\n        </span>\n\n    </div>\n</div>'),a.put("kb/ui/inline-edit/templates/text.html",'<span class="static" ng-hide="isEditing" ng-click="edit()" tooltip="{{ tooltipTitle }}">\n  {{ value }}\n   <a class="placeholder" ng-show="!value">\n      <i class="fa fa-pencil-square-o"></i>\n      {{ placeholder }}\n    </a>\n</span>\n<div ng-show="isEditing" class="editing">\n    <div class="input-group">\n        <input type="text" ng-model="editValue" class="form-control" placeholder="{{ placeholder }}"/>\n\n        <div class="input-group-btn">\n            <button class="btn btn-success" ng-click="save()">\n                <i class="fa fa-check" title="save"></i>\n            </button>\n            <button class="btn btn-default" ng-click="cancel()">\n                <i class="fa fa-times" title="Cancel"></i>\n            </button>\n        </div>\n    </div>\n</div>'),a.put("kb/ui/inline-edit/templates/textarea.html",'<span class="static" ng-hide="isEditing" ng-click="edit()" tooltip="{{ tooltipTitle }}">\n    <span kb-nl2br="value"></span>\n    <a class="placeholder" ng-show="!value">\n      <i class="fa fa-pencil-square-o"></i>\n      {{ placeholder }}\n    </a>\n</span>\n<div ng-show="isEditing" class="editing">\n  <textarea type="text" ng-model="editValue" placeholder="{{ placeholder }}">\n  </textarea>\n  <div class="form-actions">\n        <button class="btn btn-primary" ng-click="save()">Save</button>\n        <button class="btn btn-default" ng-click="cancel()">Cancel</button>\n  </div>\n</div>'),a.put("kb/ui/search-filter/templates/search-filter.html",'<div class="form-group form-group-sm search-filter">\n    <div class="input-group">\n        <input class="form-control search" type="text" kb-focus="focus" placeholder="Search..." ng-model="query" />\n        <div class="input-group-addon" ng-if="hasQuery()" ng-click="remove()"><span class="fa fa-fw fa-times"></span></div>\n        <div class="input-group-addon" ng-if="!hasQuery()"><span class="fa fa-fw fa-search"></span></div>\n    </div>\n</div>')}]);