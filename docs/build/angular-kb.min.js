(function(){angular.module("kb.config",[]).value("kb.config",{}),angular.module("kb.templates",[]),angular.module("kb",["kb.config","kb.ui.inlineEdit","kb.ui.clickToggle","kb.ui.copyButton","kb.ui.nl2br","kb.ui.sapiEventsTable","kb.ui.loader","kb.ui.autoComplete","kb.ui.focus","kb.ui.tree","kb.ui.runButton","kb.ui.codemirror","kb.ui.datetime","kb.ui.duration","kb.ui.sapiConsoleHref","kb.ui.confirm","kb.utils.multipartUpload","kb.utils.csv","kb.utils.keyboardShortcuts","kb.utils.appVersion","kb.filters.date","kb.filters.filesize","kb.filters.webalize","kb.filters.duration","kb.sapi.sapiService","kb.sapi.eventsService","kb.sapi.errorHandler","kb.templates"])}).call(this),function(){angular.module("kb.exceptionHandler",["kb.exceptionHandler.logger"]).factory("$exceptionHandler",["$window","$log","kbLogger",function(t,e,n){return t.onerror=jQuery.proxy(n.onError,n),function(t,u){return n.logException(t,u),e.error.apply(e,arguments)}}])}.call(this),function(){angular.module("kb.exceptionHandler.logger",[]).factory("kb.Logger",["$window",function(t){var e;return e=function(){function e(){}return e.prototype.onError=function(t,e,n){return this.log({message:t,file:e,lineNumber:n})},e.prototype.log=function(e){var n,u;return n=angular.extend({},e,{href:null!=(u=t.location)?u.href:void 0}),this.logRaw(n)},e.prototype.logRaw=function(t){return jQuery.ajax({url:"/utils/errors",method:"POST",contentType:"application/json",data:JSON.stringify(t),dataType:"json"})},e.prototype.logException=function(t){return this.log({message:t.message,stackTrace:t.stack})},e}()}]).factory("kbLogger",["kb.Logger",function(t){return new t}])}.call(this),function(){angular.module("kb.filters.date",[]).filter("kbdate",["$filter",function(t){var e,n;return n=t("date"),e=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d):(\d\d)([+-])(\d\d):?(\d\d)?$/,function(t,u){return t&&t.match(e)?n(t,u):t}}])}.call(this),function(){angular.module("kb.filters.duration",[]).filter("kbDuration",function(){return function(t){var e;switch(e=function(t,e,n){var u;return u=Math.round(2*t)/2,u>1?""+u+" "+n:""+u+" "+e},!1){case!(60>t):return e(t,"sec","secs");case!(3600>t):return e(t/60,"min","mins");default:return e(t/3600,"hour","hours")}}})}.call(this),function(){angular.module("kb.filters.filesize",[]).filter("kbfilesize",function(){var t;return t=function(){"use strict";function t(t){var o,s,l,c,d,p,h,f,E,m="",b=!0,g=!1;if(void 0!==arguments[3]?(c=arguments[1],d=arguments[2],b=arguments[3]):("boolean"==typeof arguments[1]?d=arguments[1]:c=arguments[1],"boolean"==typeof arguments[2]&&(b=arguments[2])),isNaN(t)||void 0!==c&&isNaN(c))throw Error("Invalid arguments");if(d=d===!0,b=b===!0,c=d?1:void 0===c?2:parseInt(c,e),l=Number(t),s=0>l,s&&(l=-l),0===l)m="0B";else for(b?(h=a.all.increments,o=a.all.nth):(h=a.bitless.increments,o=a.bitless.nth);o--;)if(p=h[o][1],f=h[o][0],l>=p){r.test(f)&&(g=!0,c=0),m=(l/p).toFixed(c),!g&&d&&(b&&u.test(f)&&(f=f.toLowerCase()),f=f.charAt(0),E=n.exec(m),null!==E&&void 0!==E[1]&&i.test(E[1])&&(m=parseInt(m,e))),m+=f;break}return s&&(m="-"+m),m}var e=10,n=/\.(.*)/,u=/b$/,r=/^B$/,i=/^0$/,a={all:{increments:[["B",1],["Kb",128],["KB",1024],["Mb",131072],["MB",1048576],["Gb",1342e5],["GB",1074e6],["Tb",1374e8],["TB",11e11],["Pb",1407e11],["PB",1126e12]],nth:11},bitless:{increments:[["B",1],["KB",1024],["MB",1048576],["GB",1073741824],["TB",1099511627776],["PB",1126e12]],nth:6}};return t}(this),function(e,n){return null==n&&(n="N/A"),angular.isNumber(e)?t(e,2,!1):n}})}.call(this),function(){angular.module("kb.filters.webalize",[]).filter("kbwebalize",function(){var t,e,n;return t=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g},{base:"-",letters:/\s/g}],n={},e=function(e){var u,r,i,a,o;if(i="_"+e,u=n[i])return u;for(a=0,o=t.length;o>a;a++)r=t[a],e=e.replace(r.letters,r.base);return n[i]=e},function(t){return e(t).toLowerCase().replace(/\ /g,"-").replace(/[^a-z0-9\-]/g,"")}})}.call(this),function(){angular.module("kb.i18n",[],["$provide",function(t){var e;return e={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"},t.value("$locale",{DATETIME_FORMATS:{MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"yyyy-MM-dd HH:mm",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,macFrac:0,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3,maxFrac:3},{minInt:1,minFrac:2,macFrac:0,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3,maxFrac:2}],CURRENCY_SYM:"$"},pluralCat:function(t){return 1===t&&returnPLURAL_CATEGORY.ONE,returnPLURAL_CATEGORY.OTHER},id:"en-us"})}])}.call(this),function(){angular.module("kb.sapi.errorHandler",["ui.bootstrap.modal","ui.bootstrap.tpls"]).factory("kbSapiErrorHandler",["$modal",function(t){var e;return e=void 0,e={remainingTimeText:function(t){var e;return e=void 0,e=Math.round((t-new Date)/6e4),e>0?"after "+e+" minutes.":" in few minutes."},handleError:function(e){var n,u;return n=void 0,n=e.message||e.error||"Unknown error during comunication with API","maintenance"===e.status&&(n=e.reason,n+=". Please repeat the action "+this.remainingTimeText(new Date(e.estimatedEndTime))),u=t.open({template:'<div class="modal-header">\n<h4 class="modal-title">Application error</h4>\n</div>\n<div class="modal-body">\n<p>{{ message }}</p>\n<p ng-show="exceptionId">\nException ID: <strong>{{ exceptionId }}</strong>\n</p>\n</div>\n<div class="modal-footer">\n<button class="btn btn-danger" ng-click="close()">Close</button>\n</div>',resolve:{message:function(){return n},exceptionId:function(){return e.exceptionId}},controller:["$scope","$modalInstance","message","exceptionId",function(t,e,n,u){return t.message=n,t.exceptionId=u,t.close=function(){return e.close()}}]})}}}])}.call(this),function(){(function(t){var e;return t.module("kb.sapi.eventsService",["kb.sapi.sapiService"]).factory("kbSapiEventsService",["kbSapiService",function(t){return function(n,u){return null==u&&(u=null),new e(n,t,u)}}]),e=function(){function e(t,e){this.eventsUrl=t,this.storageService=e,this.events=[],this.olderEventsLoading=!1,this.newEventsLoading=!1,this.hasOlderEvents=!0,this.loaded=!1,this.defaultParams={limit:50,offset:0}}return e.prototype.setDefaultParam=function(t,e){return this.defaultParams[t]=e,this},e.prototype.load=function(t){var e;return e=this,this._load(t).success(function(t){return e.events=e.uniqEvents(e.events.concat(t)),e.events.length?void 0:e.hasOlderEvents=!1})},e.prototype.refresh=function(){var t;return t=this,this.newEventsLoading=!0,this.hasOlderEvents=!0,this.load().success(function(e){return t.newEventsLoading=!1,t.events=e})},e.prototype.loadNewEvents=function(){var t,e;return t=this,e=_.max(this.events,function(t){return t.id}),this.newEventsLoading=!0,this._load({sinceId:e.id}).success(function(e){return t.newEventsLoading=!1,t.events=t.uniqEvents(t.events.concat(e))})},e.prototype.uniqEvents=function(t){return _.uniq(t,function(t){return t.id})},e.prototype.loadOlderEvents=function(){var t,e;return t=this,e=_.min(this.events,function(t){return t.id}),this.olderEventsLoading=!0,this._load({maxId:e.id}).success(function(e){return t.olderEventsLoading=!1,t.events=t.uniqEvents(t.events.concat(e)),e.length?void 0:t.hasOlderEvents=!1})},e.prototype._load=function(e){var n;return n=this,this.storageService.http({url:this.storageService.url(this.eventsUrl),method:"GET",params:t.extend({},this.defaultParams,e)}).error(function(t,e,u,r){return n.newEventsLoading=!1,n.olderEventsLoading=!1,n.storageService.errorHandler(t,e,u,r)}).success(function(){return n.loaded=!0})},e}()})(window.angular)}.call(this),function(){var t={}.hasOwnProperty,e=function(t,e){return function(){return t.apply(e,arguments)}};(function(n){var u,r;return n.module("kb.sapi.sapiService",["kb.utils.csv","kb.utils.multipartUpload"]).factory("kbSapiService",["kbSapiServiceFactory",function(t){return t()}]).factory("kbSapiServiceFactory",["$http","$rootScope","kbCsv","kbMultipartUpload","$q","$timeout",function(t,e,n,r,i,a){return function(){return new u(t,e,n,r,i,a)}}]),r=function(){function e(t){this.data=t}return e.prototype.canManageTokens=function(){return this.data.canManageTokens},e.prototype.canCreateBucket=function(){return this.data.canManageBuckets},e.prototype.canWriteBucket=function(t){return"write"===this.data.bucketPermissions[t]||"manage"===this.data.bucketPermissions[t]},e.prototype.canManageBucket=function(t){return"manage"===this.data.bucketPermissions[t]},e.prototype.setBucketPermission=function(t,e){return this.data.bucketPermissions[t]=e},e.prototype.hasAccessToBuckets=function(){var e,n,u,r;e=0,r=this.data.bucketPermissions;for(n in r)t.call(r,n)&&(u=r[n],e++);return e>0},e}(),u=function(){function t(t,n,u,r,i,a){this.$http=t,this.$rootScope=n,this.csv=u,this.multipartUpload=r,this.$q=i,this.$timeout=a,this.errorHandler=e(this.errorHandler,this),this.setVerifiedToken=e(this.setVerifiedToken,this),this.apiToken="",this.token={},this.endpoint=this.defaultEndpoint="https://connection.keboola.com",this.consoleUrl="https://storage-api-console.keboola.com",this.apiVersion="v2"}return t.prototype.isAuthenticated=function(){return""!==this.apiToken},t.prototype.setApiToken=function(t){return this.apiToken=t,this},t.prototype.verifyAndSetToken=function(t){var e;return e=this,this.$http({url:this.url("/storage/tokens/verify"),method:"GET",headers:{"x-storageapi-token":t}}).success(this.setVerifiedToken)},t.prototype.setVerifiedToken=function(t){return this.setApiToken(t.token),this.token=new r(t)},t.prototype.http=function(t){return t.headers||(t.headers={}),n.extend(t.headers,{"x-storageapi-token":this.apiToken}),this.$http(t).error(this.errorHandler)},t.prototype.url=function(t){return this.endpoint+"/"+this.apiVersion+t},t.prototype.resetSession=function(){return this.apiToken=""},t.prototype.consoleSignedUrl=function(t){return null==t&&(t="/"),""+this.consoleUrl+t+"?token="+this.apiToken+"&endpoint="+this.endpoint},t.prototype.index=function(){return this.http({url:this.url("/storage"),method:"GET"})},t.prototype.createBucket=function(t,e,n){return this.http({url:this.url("/storage/buckets"),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param({name:e,stage:t,description:n})})},t.prototype.createTable=function(t,e,n){return this.http({url:this.url("/storage/buckets/"+t+"/tables"),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param({name:e,dataString:n.join(",")})})},t.prototype.createTableAsync=function(t,e){return n.isUndefined(e.transactional)||(e.transactional=Number(e.transactional)),this.http({url:this.url("/storage/buckets/"+t+"/tables-async"),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(e)})},t.prototype.createTableFromSnapshot=function(t,e,n){return null==n&&(n=null),this.createTableAsync(t,{snapshotId:e,name:n})},t.prototype.rollbackTableFromSnapshot=function(t,e){return this.http({url:this.url("/storage/tables/"+t+"/rollback"),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param({snapshotId:e})})},t.prototype.getTable=function(t){return this.http({url:this.url("/storage/tables/"+t),method:"GET"})},t.prototype.createTableSnapshot=function(t,e){return null==e&&(e=null),this.http({url:this.url("/storage/tables/"+t+"/snapshots"),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param({description:e})})},t.prototype.getTableSnapshots=function(t,e){return this.http({url:this.url("/storage/tables/"+t+"/snapshots"),method:"GET",params:e})},t.prototype.getSnapshot=function(t){return this.http({url:this.url("/storage/snapshots/"+t),method:"GET"})},t.prototype.getTables=function(t){return this.http({url:this.url("/storage/tables/"),method:"GET",params:t})},t.prototype.deleteTable=function(t){var e;return e=this,this.http({url:this.url("/storage/tables/"+t),method:"DELETE"})},t.prototype.unlinkTable=function(t){return this.http({url:this.url("/storage/tables/"+t),method:"DELETE",params:{unlink:1}})},t.prototype.deleteTableColumn=function(t,e){return this.http({url:this.url("/storage/tables/"+t+"/columns/"+e),method:"DELETE"})},t.prototype.addTableColumn=function(t,e){return this.http({url:this.url("/storage/tables/"+t+"/columns/"),method:"POST",params:{name:e}})},t.prototype.addTableColumnToIndexed=function(t,e){return this.http({url:this.url("/storage/tables/"+t+"/indexed-columns"),method:"POST",params:{name:e}})},t.prototype.removeTableColumnFromIndexedColumns=function(t,e){return this.http({url:this.url("/storage/tables/"+t+"/indexed-columns/"+e),method:"DELETE"})},t.prototype.deleteTableRows=function(t,e){return this.http({url:this.url("/storage/tables/"+t+"/rows"),method:"DELETE",params:e})},t.prototype.truncateTable=function(t){return this.deleteTableRows(t)},t.prototype.createAliasTable=function(t,e){return this.http({url:this.url("/storage/buckets/"+t+"/table-aliases"),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(e)})},t.prototype.setAliasTableFilter=function(t,e){return this.http({url:this.url("/storage/tables/"+t+"/alias-filter"),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(e)})},t.prototype.removeAliasTableFilter=function(t){return this.http({url:this.url("/storage/tables/"+t+"/alias-filter"),method:"DELETE"})},t.prototype.enableAliasTableColumnsAutoSync=function(t){return this.http({url:this.url("/storage/tables/"+t+"/alias-columns-auto-sync"),method:"POST"})},t.prototype.disableAliasTableColumnsAutoSync=function(t){return this.http({url:this.url("/storage/tables/"+t+"/alias-columns-auto-sync"),method:"DELETE"})},t.prototype.deleteTableAttribute=function(t,e){return this.http({url:this.url("/storage/tables/"+t+"/attributes/"+e),method:"DELETE"})},t.prototype.saveTableAttribute=function(t,e,u,r){var i;return i={value:u},n.isUndefined(r)||(i["protected"]=r),this.http({url:this.url("/storage/tables/"+t+"/attributes/"+e),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(i)}).success(function(){})},t.prototype.deleteBucketAttribute=function(t,e){return this.http({url:this.url("/storage/buckets/"+t+"/attributes/"+e),method:"DELETE"})},t.prototype.saveBucketAttribute=function(t,e,u,r){var i;return i={value:u},n.isUndefined(r)||(i["protected"]=r),this.http({url:this.url("/storage/buckets/"+t+"/attributes/"+e),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(i)})},t.prototype.deleteBucket=function(t){return this.http({url:this.url("/storage/buckets/"+t),method:"DELETE"})},t.prototype.errorHandler=function(t){return _.isEmpty(t)?void 0:this.$rootScope.$broadcast("storageError",t)},t.prototype.getBucketsWithTables=function(t,e){var u,r,i,a,o,s,l,c;return null==t&&(t=null),null==e&&(e=null),o=this,u=[],l=[],c=[],r=this.getBuckets(e).success(function(t){return l=t}).error(function(){return o.bucketsLoading=!1}),s=this.getTables(t).success(function(t){return c=t}),i=this.$q.defer(),this.$q.all([r,s]).then(function(){var t;return t={},n.forEach(c,function(e){return t[e.bucket.id]||(t[e.bucket.id]=[]),t[e.bucket.id].push(e)}),n.forEach(l,function(e){return e.tables=[],t[e.id]?e.tables=t[e.id]:void 0}),n.forEach(_.sortBy(l,function(t){return t.id}),function(t){return u.push(t)}),i.resolve(u)}),a=i.promise,a.success=function(t){return a.then(function(e){return t(e.data,e.status,e.headers)}),a},a},t.prototype.getBuckets=function(t){return this.http({url:this.url("/storage/buckets/"),method:"GET",params:t})},t.prototype.getBucket=function(t){return this.http({url:this.url("/storage/buckets/"+t),method:"GET"})},t.prototype.exportUrl=function(t,e){return this.url("/storage/tables/"+t+"/export"+(e?"?limit="+e:""))},t.prototype.exportDownloadUrl=function(t,e){return this.url("/storage/tables/"+t+"/export?token="+this.apiToken+(e?"&limit="+e:""))},t.prototype.saveTableData=function(t,e,u){var r;return r=n.extend({},u,{dataString:e}),n.isUndefined(r.incremental)||(r.incremental=Number(r.incremental)),n.isUndefined(r.partial)||(r.partial=Number(r.partial)),this.http({url:this.url("/storage/tables/"+t+"/import"),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(r)})},t.prototype.saveTableDataAsync=function(t,e){return n.isUndefined(e.incremental)||(e.incremental=Number(e.incremental)),n.isUndefined(e.partial)||(e.partial=Number(e.partial)),this.http({url:this.url("/storage/tables/"+t+"/import-async"),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(e)})},t.prototype.tableData=function(t,e,u){var r,i,a,o;return null==e&&(e={}),null==u&&(u=null),r=this.csv,i=this.$q.defer(),a=n.isNumber(e)?{limit:e}:e,this.http({url:this.exportUrl(t)+"?"+$.param(a),method:"GET"}).success(function(t){var e;return e=r.parse(t),e={header:e.shift(),data:e},u&&u(e),i.resolve(e)}).error(function(t,e,n,u){return i.reject({data:t,status:e,heders:n,config:u})}),o=i.promise,o.success=function(t){return o.then(function(e){return t(e)}),o},o.error=function(t){return o.then(null,function(e){return t(e.data,e.status,e.headers)}),o},o},t.prototype.getTokens=function(){return this.http({url:this.url("/storage/tokens/"),method:"GET"})},t.prototype.getToken=function(t){return this.http({url:this.url("/storage/tokens/"+t),method:"GET"})},t.prototype.createToken=function(t){var e;return e={description:t.description,expiresIn:t.expiresIn,canManageBuckets:t.canManageBuckets,canReadAllFileUploads:t.canReadAllFileUploads},n.forEach(t.bucketPermissions,function(t,n){return e["bucketPermissions["+n+"]"]=t}),this.http({url:this.url("/storage/tokens/"),method:"POST",params:e}).success(function(e){return n.copy(e,t)})},t.prototype.saveToken=function(t){var e;return e={description:t.description},n.forEach(t.bucketPermissions,function(t,n){return e["bucketPermissions["+n+"]"]=t}),this.http({url:this.url("/storage/tokens/"+t.id),method:"PUT",params:e}).success(function(e){return n.copy(e,t)})},t.prototype.refreshToken=function(t){var e;return e=this,this.http({url:this.url("/storage/tokens/"+t.id+"/refresh"),method:"POST"}).success(function(u){return t.token===e.apiToken&&e.verifyAndSetToken(u.token),n.copy(u,t)})},t.prototype.deleteToken=function(t){return this.http({url:this.url("/storage/tokens/"+t),method:"DELETE"})},t.prototype.shareToken=function(t,e,n){return this.http({url:this.url("/storage/tokens/"+t+"/share"),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param({recipientEmail:e,message:n})})},t.prototype.getFiles=function(t){return this.http({url:this.url("/storage/files"),method:"GET",params:t})},t.prototype.prepareFileUpload=function(t){return this.http({url:this.url("/storage/files/prepare"),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(t)})},t.prototype.getJobs=function(t){return this.http({url:this.url("/storage/jobs"),method:"GET",params:t})},t.prototype.getJob=function(t){return this.http({url:this.url("/storage/jobs/"+t),method:"GET"})},t.prototype.resolveAsyncRequest=function(t){var e,n,u,r,i;return e=this.$q.defer(),i=this,u=function(t){return i.errorHandler(t),e.reject(t)},r=function(t){return e.resolve(t)},n=function(t){return i.pollJobUntilDone(t).then(function(t){return"success"===t.status&&r(t.results),"error"===t.status?u(t.error):void 0},function(t){return u(t)})},t.success(function(t){return n(t.id)}).error(function(t){return u(t)}),e.promise},t.prototype.pollJobUntilDone=function(t,e){var n,u,r,i,a,o;return null==e&&(e=20),r=this.$q.defer(),o=this,n=0,a=function(t){return"success"===t.status||"error"===t.status?(r.resolve(t),void 0):u()},i=function(t){return o.errorHandler(t),r.reject(t)},u=function(){return o.$timeout(function(){return n++,n>=e?(i({error:"Timeout after "+e+" requests"}),void 0):o.getJob(t).success(a).error(i)},Math.min(100*Math.pow(2,n)+Math.round(100*Math.random()),6e4),!1)},u(),r.promise},t.prototype.generateId=function(){return this.http({url:this.url("/storage/tickets"),method:"POST"}).error(this.errorHandler)},t}()})(window.angular)}.call(this),function(){angular.module("kb.ui.autoComplete",[]).directive("kbAutoComplete",function(){return{restrict:"A",require:"ngModel",link:function(t,e,n,u){var r,i;return i=t.$eval(n.kbAutoComplete)||{},r=function(e,n){var r;return(null!=(r=n.item)?r.value:void 0)?t.$apply(function(){return u.$setViewValue(n.item.value)}):void 0},i.change=i.change?function(t,e){return i.change(t,e),r(t,e)}:r,e.autocomplete(i)}}})}.call(this),function(){angular.module("kb.ui.clickToggle",[]).directive("kbClickToggle",["$parse",function(t){return function(e,n,u){var r,i,a;return r=t(u.kbClickToggle),i=r.assign,a=function(){return e.$apply(function(){return i(e,!r(e))})},n.bind("click",a),n.bind("$destroy",function(){return n.unbind("click",a)})}}])}.call(this),function(){angular.module("kb.ui.codemirror",["kb.config"]).directive("kbCodemirror",["$timeout","$window","kb.config",function(t,e,n){return{restrict:"A",require:"ngModel",link:function(u,r,i,a){var o;return o=angular.extend({},n.codemirror||{},u.$eval(i.kbCodemirror)),t(function(){var t;return t=CodeMirror.fromTextArea(r[0],o),o.cursorPos&&(t.setCursor(o.cursorPos),e.scrollTo(t.cursorCoords().left,t.cursorCoords().top)),t.on("change",function(t){var e;return e=t.getValue(),a.$setViewValue(e)}),t.on("blur",function(t){return angular.element(t.getWrapperElement()).removeClass("focused")}),t.on("focus",function(t){return angular.element(t.getWrapperElement()).addClass("focused")}),a.$formatters.push(function(t){if(angular.isUndefined(t)||null===t)return"";if(angular.isObject(t)||angular.isArray(t))throw Error("ui-codemirror cannot use an object or an array as a model");return t}),a.$render=function(){return t.setValue(a.$viewValue)}})}}}])}.call(this),function(){angular.module("kb.ui.confirm",["kb.config","ui.bootstrap.modal","ngSanitize"]).factory("kbConfirm",["$modal",function(t){var e,n;return n={header:"",message:"",cancelButton:{label:"Cancel",type:""},confirmButton:{label:"Confirm",type:"primary"}},e={confirm:function(e){return t.open({templateUrl:"kb/ui/confirm/templates/confirm.html",resolve:{params:function(){return jQuery.extend(!0,{},n,e)}},controller:["$scope","$modalInstance","params",function(t,e,n){return t.params=n,t.close=function(){return e.dismiss()},t.confirm=function(){return e.close()}}]})}}}]).directive("kbConfirm",["kbConfirm","$parse",function(t,e){return{restrict:"A",link:function(n,u,r){var i;i=e(r.onConfirm),u.on("click",function(){var e,u;return u={header:r.header,message:r.message,confirmButton:{}},""!==r.confirmLabel&&(u.confirmButton.label=r.confirmLabel),""!==r.confirmType&&(u.confirmButton.type=r.confirmType),e=t.confirm(u),e.result.then(function(){return i(n)})})}}}])}.call(this),function(){angular.module("kb.ui.copyButton",["kb.config"]).directive("kbCopyButton",["$timeout","kb.config",function(t,e){var n,u,r,i;return u=null!=(r=e.ui)?null!=(i=r["copy-button"])?i.swfPath:void 0:void 0,u||(u="/components/zeroclipboard/ZeroClipboard.swf"),n=new ZeroClipboard(null,{moviePath:u,allowScriptAccess:"always",trustedDomains:["*"]}),n.on("complete",function(){return angular.element(n.htmlBridge).attr("data-original-title",angular.element(this).attr("copy-message")),angular.element(n.htmlBridge).tooltip("show")}),n.on("load",function(t){return angular.element(t.htmlBridge).tooltip()}),n.on("mouseover",function(){return angular.element(n.htmlBridge).attr("data-original-title",angular.element(this).attr("title")),angular.element(n.htmlBridge).tooltip("show")}),{restrict:"E",scope:{copyValue:"=",copyTitle:"@",copyMessage:"@"},transclude:!0,template:'<span ng-transclude class="kb-copy-button" title="{{ copyTitle }}" data-clipboard-text="{{ copyValue }}" copy-message="{{ copyMessage }}"></span>',link:function(t,e){var u;return u=e.find(".kb-copy-button"),n.glue(u),t.$on("$destroy",function(){return n.unglue(u)})}}}])}.call(this),function(){angular.module("kb.ui.datetime",["ui.bootstrap.tooltip","ui.bootstrap.tpls"]).directive("kbDatetime",["$filter",function(t){var e,n;return n=t("date"),e=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d):(\d\d)([+-])(\d\d):?(\d\d)?$/,{restrict:"E",transclude:!0,replace:!0,scope:{datetime:"=",emptyValue:"@"},template:'<span ng-cloak ng-class="{\'muted\': isEmpty()}">\n	{{ formattedValue() }}\n	<i class="kb-datetime glyphicon glyphicon-time" tooltip="{{ tooltipTitle }}" ng-show="isDatetime()"></i>\n</span>',link:function(t){return t.tooltipTitle="",t.resolveEmptyValue=function(){return t.emptyValue?t.emptyValue:"N/A"
},t.isEmpty=function(){return!t.datetime},t.isDatetime=function(){return!(!t.datetime||!t.datetime.match(e))},t.$watch("datetime",function(){return t.tooltipTitle=t.isDatetime()?"Original time: "+t.datetime:""}),t.formattedValue=function(){return t.isEmpty()?t.resolveEmptyValue():t.isDatetime()?n(t.datetime,"fullDate"):t.datetime}}}}])}.call(this),function(){angular.module("kb.ui.duration",["kb.filters.duration"]).directive("kbDuration",function(){return{restrict:"E",scope:{duration:"=",emptyValue:"@"},replace:!0,template:'<span title="{{ duration }} seconds">\n	<span ng-hide="isEmpty()">{{ duration | kbDuration }}</span>\n	<span ng-show="isEmpty()" class="muted">{{ getEmptyValue() }}</span>\n</span>',link:function(t){return t.isEmpty=function(){return null===t.duration||angular.isUndefined(t.duration)},t.getEmptyValue=function(){return angular.isUndefined(t.emptyValue)?"N/A":t.emptyValue}}}})}.call(this),function(){angular.module("kb.ui.focus",[]).directive("kbFocus",["$timeout","$parse",function(t){return function(e,n,u){var r;return r=function(){return t(function(){return n.focus()},50)},u.kbFocus?e.$watch(u.kbFocus,function(t){return t?r():void 0}):(r(),void 0)}}])}.call(this),function(){(function(t){var e,n;return n=t.module("kb.ui.inlineEdit",[]),e=function(e){return function(){return{restrict:"E",scope:{value:"=",disabled:"=",onSave:"&",placeholder:"@",editTitle:"@"},templateUrl:e,controller:["$scope","$element","$attrs","$timeout",function(e,n,u,r){var i;return n.addClass("kb-inline-edit"),n.addClass(n[0].tagName.toLowerCase()),e.tooltipTitle="",i=function(){return e.tooltipTitle=e.isEditing||e.disabled?"":e.editTitle},e.$watch("disabled",function(t){return t?n.addClass("disabled"):n.removeClass("disabled"),e.isEditing&&!t?e.edit():e.cancel(),i()}),e.$watch("isEditing",i),e.$watch("editTitle",i),e.edit=function(){return e.disabled?void 0:(e.isEditing=!0,e.editValue=e.value,t.element("body").bind("click.inlineEdit",function(){return e.$apply(function(){return e.cancel()}),!0}),n.bind("click.inlineEdit",function(t){return t.stopPropagation()}),n.bind("keyup.inlineEdit",function(t){return 13===t.keyCode&&"kb-inline-edit-textarea"!==n.get(0).tagName.toLocaleLowerCase()&&e.$apply(e.save),27===t.keyCode&&e.$apply(e.cancel),!1}),r(function(){return n.find(":input").not("button").focus()}))},e.cancel=function(){e.isEditing=!1,t.element("body").unbind(".inlineEdit"),n.unbind(".inlineEdit")},e.save=function(){return e.value=e.editValue,t.isFunction(e.onSave)&&r(function(){return e.onSave({newValue:e.editValue})}),e.cancel()}}]}}},n.factory("kbInlineEdit",function(){return e}).directive("kbInlineEdit",e("kb/ui/inline-edit/templates/text.html")).directive("kbInlineEditDatetime",e("kb/ui/inline-edit/templates/datetime.html")).directive("kbInlineEditTextarea",e("kb/ui/inline-edit/templates/textarea.html")).directive("kbInlineEditSelect",function(){var t;return t=e("kb/ui/inline-edit/templates/select.html")(),t.scope.options="=",t})})(window.angular)}.call(this),function(){angular.module("kb.ui.loader",[]).directive("kbLoader",function(){return{restrict:"E",template:'<a kb-loader class="kb-loader">\n	<i class="glyphicon glyphicon-refresh"> </i>\n</a>',replace:!0,link:function(t,e,n){var u;return u=e.find("i"),t.$watch(n.isLoading,function(t){return u.removeClass("loading"),t?u.addClass("loading"):void 0})}}})}.call(this),function(){angular.module("kb.ui.nl2br",[]).directive("kbNl2br",function(){return function(t,e,n){return t.$watch(n.kbNl2br,function(t){var n,u;return null==t&&(t=""),u=t.replace("\r\n","\n"),n=u.split("\n"),e.empty(),angular.forEach(n,function(t,u){var r,i;return i=angular.element("<span></span>"),i.text(t),e.append(i),r=n.length-1===u,r?void 0:e.append(angular.element("<br/>"))})})}})}.call(this),function(){angular.module("kb.ui.runButton",["kb.ui.loader"]).directive("kbRunButton",function(){return{restrict:"E",template:'<button class="btn btn-default run-transformation kb-loader">\n	<i  class="glyphicon glyphicon-play"> </i>\n</button>',replace:!0,link:function(t,e,n){var u;return u=e.find("i"),t.$watch(n.isRunning,function(t){return e.removeClass("running"),u.removeClass("glyphicon-refresh"),u.removeClass("glyphicon-play"),u.removeClass("loading"),t?(e.addClass("running"),u.addClass("glyphicon-refresh loading")):u.addClass("glyphicon-play")})}}})}.call(this),function(){angular.module("kb.ui.sapiConsoleHref",["kb.sapi.sapiService"]).directive("kbSapiConsoleHref",["kbSapiService","$sce",function(t,e){return{restrict:"E",transclude:!0,scope:{path:"@",token:"@"},template:'<form action="{{ url() }}" method="post" class="kb-sapi-console-href" target="_blank">\n	<a ng-click="submit()" ng-transclude></a>\n	<input type="hidden" name="token" value="{{ getToken() }}" />\n</form>',link:function(n,u){var r;return r=function(){return n.path||"/"},n.getToken=function(){return n.token?n.token:t.apiToken},n.url=function(){return e.trustAsResourceUrl(""+t.consoleUrl+r()+"?endpoint="+t.endpoint)},n.submit=function(){u.find("form").submit()}}}}])}.call(this),function(){angular.module("kb.ui.sapiEventsTable",["kb.sapi.eventsService","kb.ui.tree"]).directive("kbSapiEventsTable",function(){var t,e,n,u,r;return u=["storage.tableImportDone"],n=["storage.tableExported"],r={table:'<div class="kb-sapi-events-table">\n	<div ng-show="events.events.length && events.loaded && !selectedEvent">\n		<table class="table table-striped table-events">\n			<tbody>\n				<tr ng-repeat="event in events.events | orderBy:\'id\':true track by event.id" ng-class="eventClass(event)" ng-click="eventDetail(event)" title="Event id: {{ event.id }}">\n					<td class="created">{{ event.created | date:\'MMM d, HH:mm:ss\' }}</td>\n					<td>{{ feedMessage(event) }}</td>\n				</tr>\n			</tbody>\n		</table>\n		<div class="list-more" ng-show="events.hasOlderEvents">\n			<button ng-click="events.loadOlderEvents()" class="btn btn-default btn-large" ng-disabled="events.olderEventsLoading">More..</button>\n		</div>\n	</div>\n	<div ng-show="!events.events.length && events.loaded">\n		<div class="well">\n			There are no events yet.\n		</div>\n	</div>\n	<div ng-show="!events.loaded">\n		<div class="well">\n			<i class="icon-refresh loading"></i>\n			Loading events...\n		</div>\n	</div>\n							 <div class="event-detail" ng-show="selectedEvent">\n										 <a ng-click="leaveEventDetail()">\n											<i class="icon-chevron-left"></i> Back to events list\n										 </a>\n							 			<h3>Event detail</h3>\n									 <div class="well message" ng-class="eventClass(selectedEvent)">\n												{{ selectedEvent.message }}\n											</div>\n\n											<p class="well" ng-show="selectedEvent.description">\n												{{ selectedEvent.description }}\n											</p>\n									 \n											<div class="tab-pane active" id="tableOverview">\n												<table class="table">\n													<tbody>\n														<tr>\n														<td>ID</td>\n														<td>{{ selectedEvent.id }}</td>\n														</tr>\n														<tr>\n														<td>Created</td>\n														<td><kb-datetime datetime="selectedEvent.created"></kb-datetime></td>\n														</tr>\n														<tr>\n														<td>Component</td>\n														<td>{{ selectedEvent.component }}</td>\n														</tr>\n														<tr>\n															<td>Configuration ID</td>\n															<td>{{ selectedEvent.configurationId || "N/A" }}</td>\n														</tr>\n														<tr>\n														<td>Run ID</td>\n														<td>{{ selectedEvent.runId || "N/A" }}</td>\n														</tr>\n													</tbody>\n												</table>\n											</div>\n\n											<div ng-show="selectedEvent.attachments.length">\n												<h3>Attachments</h3>\n												<ul>\n													<li ng-repeat="attachment in selectedEvent.attachments">\n														<a href="{{ attachment.url }}">\n															{{ attachment.uploadType }} ({{ attachment.sizeBytes | kbfilesize}})\n														</a>\n													</li>\n												</ul>\n											</div>\n									 \n											<div ng-show="selectedEvent.params">\n												<h3>Parameters</h3>\n												<kb-tree data="selectedEvent.params"></kb-tree>\n											</div>\n									 \n											<div ng-show="selectedEvent.performance">\n												<h3>Performance</h3>\n												<kb-tree data="selectedEvent.performance"></kb-tree>\n											</div>\n									 \n											<div ng-show="selectedEvent.results">\n												<h3>Results</h3>\n												<kb-tree data="selectedEvent.results"></kb-tree>\n											</div>\n									 \n											<div ng-show="selectedEvent.context">\n												<h3>Context</h3>\n												<kb-tree data="selectedEvent.context"></kb-tree>\n											</div>\n\n										 <a ng-click="leaveEventDetail()">\n										 	<i class="icon-chevron-left"></i> Back to events list\n										 </a>\n							 </div>\n</div>'},e="Deprecated authorization method used.",t={restrict:"E",replace:!0,scope:{events:"=",autoReload:"="},template:r.table,controller:["$scope","$element","$compile","$timeout",function(t,r,i,a){var o,s;return s=null,t.selectedEvent=null,t.eventClass=function(t){var e;return t?"error"===t.type?"error":"warn"===t.type?"warning":"success"===t.type?"success":"storage.tableImportDone"===t.event&&(null!=(e=t.results.warnings)?e.length:void 0)>0?"warning":_.indexOf(u,t.event)>=0?"success":_.indexOf(n,t.event)>=0?"info":"":""},t.eventDetail=function(e){return t.selectedEvent=e},t.leaveEventDetail=function(){return console.log="leave event",t.selectedEvent=null},t.isEmpty=function(t){return!_.size(t||[])},t.eventType=function(t){switch(t.event){case"storage.tableImportError":case"storage.tableImportDone":return{icon:"icon-arrow-up",tooltip:"Import action"};case"storage.tableExported":return{icon:"icon-arrow-down",tooltip:"Export action"};default:return{icon:"",tooltip:""}}},t.eventTypeTooltip=function(e){return{title:t.eventType(e).tooltip}},t.feedMessage=function(t){var e;return e=t.configurationId?""+t.configurationId+" - ":"",e+=t.message},t.deprecatedAuthorizationTooltip=function(){return{title:e}},t.isDeprecatedAuthorization=function(t){return"deprecated"===t.context.authorization},t.$on("$destroy",function(){return a.cancel(s)}),o=function(){return s=a(function(){var e;return e=function(){return t.autoReload?o():s=null},t.events.loadNewEvents().success(e).error(e)},1e3)},t.$watch("autoReload",function(t){return t&&!s?o():void 0})}]}})}.call(this),function(){angular.module("kb.ui.tree",[]).directive("kbTreeNode",["$compile",function(t){var e,n,u;return u='<div class="kb-tree-node">\n	<div ng-repeat="(key, value) in data">\n		<span class="key">{{ key }}:</span>\n		<kb-tree-node data="value"></kb-tree-node">\n	</div>\n</div>',n='<span class="value">\n	{{ data }}\n</span>',e={restrict:"E",replace:!0,scope:{data:"="},link:function(e,r){var i,a;return e.isNode=function(){return angular.isObject(e.data)||angular.isArray(e.data)},a=angular.element(e.isNode()?u:n),i=t(a),i(e),r.empty().replaceWith(a)}}}]).directive("kbTree",["$compile",function(t){var e,n;return n='<div class="kb-tree">\n	<kb-tree-node data="data"></kb-tree-node>\n</div>',e={restrict:"E",scope:{data:"="},link:function(e,u){return e.$watch("data",function(){var r,i;return r=angular.element(n),i=t(r),i(e),u.html(null).append(r)})}}}])}.call(this),function(){angular.module("kb.utils.appVersion",[]).provider("kbAppVersion",["$sceDelegateProvider",function(t){var e,n,u;u="v1",e="/",this.setVersion=function(t){return u=t,this},this.setBasePath=function(n){return e=n,t.resourceUrlWhitelist(["self",e+"**"]),this},this.versionUrl=function(t){return e+t+"?version="+u},n=this,this.$get=["$sce",function(){return{version:function(){return u},versionUrl:function(t){return n.versionUrl(t)}}}]}])}.call(this),function(){angular.module("kb.utils.csv",[]).factory("kbCsv",function(){var t;return t=function(){function t(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var e={parse:function(e,n){function u(t){f>p||(p>f&&(f=p,E=[]),E.push(t))}function r(){var t,e,n,u;return n=p,u=p,t=function(){return m=","}(p)?"":null,null!==t?(e=i(),null!==e?t=[t,e]:(t=null,p=u)):(t=null,p=u),null!==t&&(t=function(t,e){return e}(n,t[1])),null===t&&(p=n),t}function i(){var t,n,r,i,o,s,l,c,d;for(s=p,l=p,t=[],/^[\n\r]/.test(e.charAt(p))?(n=e.charAt(p),p++):(n=null,0===h&&u("[\\n\\r]"));null!==n;)t.push(n),/^[\n\r]/.test(e.charAt(p))?(n=e.charAt(p),p++):(n=null,0===h&&u("[\\n\\r]"));if(null!==t)if(n=a(),null!==n){if(r=[],c=p,d=p,/^[\n\r]/.test(e.charAt(p))?(o=e.charAt(p),p++):(o=null,0===h&&u("[\\n\\r]")),null!==o)for(i=[];null!==o;)i.push(o),/^[\n\r]/.test(e.charAt(p))?(o=e.charAt(p),p++):(o=null,0===h&&u("[\\n\\r]"));else i=null;for(null!==i?(o=a(),null!==o?i=[i,o]:(i=null,p=d)):(i=null,p=d),null!==i&&(i=function(t,e){return e}(c,i[1])),null===i&&(p=c);null!==i;){if(r.push(i),c=p,d=p,/^[\n\r]/.test(e.charAt(p))?(o=e.charAt(p),p++):(o=null,0===h&&u("[\\n\\r]")),null!==o)for(i=[];null!==o;)i.push(o),/^[\n\r]/.test(e.charAt(p))?(o=e.charAt(p),p++):(o=null,0===h&&u("[\\n\\r]"));else i=null;null!==i?(o=a(),null!==o?i=[i,o]:(i=null,p=d)):(i=null,p=d),null!==i&&(i=function(t,e){return e}(c,i[1])),null===i&&(p=c)}if(null!==r){for(i=[],/^[\n\r]/.test(e.charAt(p))?(o=e.charAt(p),p++):(o=null,0===h&&u("[\\n\\r]"));null!==o;)i.push(o),/^[\n\r]/.test(e.charAt(p))?(o=e.charAt(p),p++):(o=null,0===h&&u("[\\n\\r]"));null!==i?t=[t,n,r,i]:(t=null,p=l)}else t=null,p=l}else t=null,p=l;else t=null,p=l;return null!==t&&(t=function(t,e,n){return n.unshift(e),n}(s,t[1],t[2])),null===t&&(p=s),t}function a(){var t,n,r,i,a,s,l,c,d;if(s=p,l=p,t=o(),null!==t){for(n=[],c=p,d=p,e.length>p?(r=e.charAt(p),p++):(r=null,0===h&&u("any character")),null!==r?(i=function(t,e){return e==m}(p,r)?"":null,null!==i?(a=o(),null!==a?r=[r,i,a]:(r=null,p=d)):(r=null,p=d)):(r=null,p=d),null!==r&&(r=function(t,e,n){return n}(c,r[0],r[2])),null===r&&(p=c);null!==r;)n.push(r),c=p,d=p,e.length>p?(r=e.charAt(p),p++):(r=null,0===h&&u("any character")),null!==r?(i=function(t,e){return e==m}(p,r)?"":null,null!==i?(a=o(),null!==a?r=[r,i,a]:(r=null,p=d)):(r=null,p=d)):(r=null,p=d),null!==r&&(r=function(t,e,n){return n}(c,r[0],r[2])),null===r&&(p=c);null!==n?(r=function(t,e,n){return null!==e||n.length}(p,t,n)?"":null,null!==r?t=[t,n,r]:(t=null,p=l)):(t=null,p=l)}else t=null,p=l;return null!==t&&(t=function(t,e,n){return n.unshift(e),n}(s,t[0],t[1])),null===t&&(p=s),t}function o(){var t,n,r,i,a;if(i=p,a=p,34===e.charCodeAt(p)?(t='"',p++):(t=null,0===h&&u('"\\""')),null!==t){for(n=[],r=s();null!==r;)n.push(r),r=s();null!==n?(34===e.charCodeAt(p)?(r='"',p++):(r=null,0===h&&u('"\\""')),null!==r?t=[t,n,r]:(t=null,p=a)):(t=null,p=a)}else t=null,p=a;return null!==t&&(t=function(t,e){return e.join("")}(i,t[1])),null===t&&(p=i),t}function s(){var t,n,r,i;return r=p,i=p,34===e.charCodeAt(p)?(t='"',p++):(t=null,0===h&&u('"\\""')),null!==t?(34===e.charCodeAt(p)?(n='"',p++):(n=null,0===h&&u('"\\""')),null!==n?t=[t,n]:(t=null,p=i)):(t=null,p=i),null!==t&&(t=function(){return'"'}(r)),null===t&&(p=r),null===t&&(/^[^"]/.test(e.charAt(p))?(t=e.charAt(p),p++):(t=null,0===h&&u('[^"]'))),t}function l(t){t.sort();for(var e=null,n=[],u=0;t.length>u;u++)t[u]!==e&&(n.push(t[u]),e=t[u]);return n}function c(){for(var t=1,n=1,u=!1,r=0;Math.max(p,f)>r;r++){var i=e.charAt(r);"\n"===i?(u||t++,n=1,u=!1):"\r"===i||"\u2028"===i||"\u2029"===i?(t++,n=1,u=!0):(n++,u=!1)}return{line:t,column:n}}var d={comma:r,sv:i,line:a,field:o,"char":s};if(void 0!==n){if(void 0===d[n])throw Error("Invalid rule name: "+t(n)+".")}else n="comma";var p=0,h=0,f=0,E=[],m=",",b=d[n]();if(null===b||p!==e.length){var g=Math.max(p,f),v=e.length>g?e.charAt(g):null,k=c();throw new this.SyntaxError(l(E),v,g,k.line,k.column)}return b},toSource:function(){return this._source}};return e.SyntaxError=function(e,n,u,r,i){function a(e,n){var u,r;switch(e.length){case 0:u="end of input";break;case 1:u=e[0];break;default:u=e.slice(0,e.length-1).join(", ")+" or "+e[e.length-1]}return r=n?t(n):"end of input","Expected "+u+" but "+r+" found."}this.name="SyntaxError",this.expected=e,this.found=n,this.message=a(e,n),this.offset=u,this.line=r,this.column=i},e.SyntaxError.prototype=Error.prototype,e}(),{parse:t.parse,create:function(t){var e;return e=[],t.forEach(function(t){var n;return n=[],t.forEach(function(t){var e;return e=null===t?"":""+t,n.push('"'+e.replace(/"/g,'""')+'"')}),e.push(n.join(","))}),e.join("\n")}}})}.call(this),function(){angular.module("kb.utils.keyboardShortcuts",[]).factory("kbKeyboardShortcuts",function(){var t;return t=Mousetrap.stopCallback,Mousetrap.stopCallback=function(e,n,u){return t(e,n,u)?!0:"BUTTON"===n.tagName},function(t,e){return angular.forEach(e,function(e,n){return Mousetrap.bind(n,function(){return t.$apply(function(){return t[e]()}),!1}),t.$on("$destroy",function(){return Mousetrap.unbind(n)})})}})}.call(this),function(){var t={}.hasOwnProperty;angular.module("kb.utils.multipartUpload",[]).factory("kbMultipartUpload",function(){return{upload:function(e,n,u){var r,i,a,o,s;r="-----------------------------"+Math.floor(Math.random()*Math.pow(10,8)),i=[];for(o in n)t.call(n,o)&&(s=n[o],i.push("--"+r),a='Content-Disposition: form-data; name="'+o+'"; ',s.filename&&(a+='filename="'+s.filename+'";'),i.push(a),s.type&&i.push("Content-Type: "+s.type),i.push(""),i.push(s.content||s));return i.push("--"+r+"--"),$.ajax({type:"POST",url:e,data:i.join("\r\n"),headers:u,contentType:"multipart/form-data; boundary="+r})}}})}.call(this),angular.module("kb.templates").run(["$templateCache",function(t){t.put("kb/ui/confirm/templates/confirm.html",'<div class="modal-header">\n    <h4 class="modal-title">{{ params.header }}</h4>\n</div>\n<div class="modal-body">\n    <p ng-bind-html="params.message"></p>\n</div>\n<div class="modal-footer">\n    <button class="btn btn-default" ng-click="close()">{{ params.cancelButton.label }}</button>\n    <button class="btn btn-{{ params.confirmButton.type}}" ng-click="confirm()">{{ params.confirmButton.label }}</button>\n</div>'),t.put("kb/ui/inline-edit/templates/datetime.html",'<span class="static" ng-hide="isEditing" ng-click="edit()" tooltip="{{ tooltipTitle }}">\n	<kb-datetime datetime="value"></kb-datetime>\n	 <a class="placeholder" ng-show="!value">\n         <i class="icon-edit"></i>\n         {{ placeholder }}\n     </a>\n</span>\n<div ng-show="isEditing" class="editing">\n    <div class="input-group">\n        <input type="text" ng-model="editValue" class="form-control" placeholder="{{ placeholder }}"/>\n\n        <div class="input-group-btn">\n            <button class="btn btn-success" ng-click="save()">\n                <i class="glyphicon glyphicon-ok" title="save"></i>\n            </button>\n            <button class="btn btn-default" ng-click="cancel()">\n                <i class="glyphicon glyphicon-remove" title="Cancel"></i>\n            </button>\n        </div>\n    </div>\n</div>\n\n'),t.put("kb/ui/inline-edit/templates/select.html",'<span class="static" ng-hide="isEditing" ng-click="edit()" tooltip="{{ tooltipTitle }}">\n	{{ value }}\n	<span class="placeholder" ng-show="!value">{{ placeholder }}</span>\n</span>\n<div ng-show="isEditing" class="editing">\n    <div class="input-group">\n        <select ng-options="value for value in options" class="form-control" ng-model="editValue"></select>\n\n        <span class="input-group-btn">\n            <button class="btn btn-success" ng-click="save()">\n                    <i class="glyphicon glyphicon-ok" title="save"></i>\n            </button>\n            <button class="btn btn-default" ng-click="cancel()">\n                <i class="glyphicon glyphicon-remove" title="Cancel"></i>\n            </button>\n        </span>\n\n    </div>\n</div>'),t.put("kb/ui/inline-edit/templates/text.html",'<span class="static" ng-hide="isEditing" ng-click="edit()" tooltip="{{ tooltipTitle }}">\n	{{ value }}\n	 <a class="placeholder" ng-show="!value">\n			<i class="icon-edit"></i>\n			{{ placeholder }}\n		</a>\n</span>\n<div ng-show="isEditing" class="editing">\n    <div class="input-group">\n        <input type="text" ng-model="editValue" class="form-control" placeholder="{{ placeholder }}"/>\n\n        <div class="input-group-btn">\n            <button class="btn btn-success" ng-click="save()">\n                <i class="glyphicon glyphicon-ok" title="save"></i>\n            </button>\n            <button class="btn btn-default" ng-click="cancel()">\n                <i class="glyphicon glyphicon-remove" title="Cancel"></i>\n            </button>\n        </div>\n    </div>\n</div>'),t.put("kb/ui/inline-edit/templates/textarea.html",'<span class="static" ng-hide="isEditing" ng-click="edit()" tooltip="{{ tooltipTitle }}">\n		<span kb-nl2br="value"></span>\n		<a class="placeholder" ng-show="!value">\n			<i class="icon-edit"></i>\n			{{ placeholder }}\n		</a>\n</span>\n<div ng-show="isEditing" class="editing">\n	<textarea type="text" ng-model="editValue" placeholder="{{ placeholder }}">\n	</textarea>\n	<div class="form-actions">\n				<button class="btn btn-primary" ng-click="save()">Save</button>\n				<button class="btn btn-default" ng-click="cancel()">Cancel</button>\n	</div>\n</div>')}]);